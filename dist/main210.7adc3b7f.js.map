{"version":3,"sources":["libs/GLTFLoader.js","libs/loader.js","libs/CSS3DRenderer.js","main210.js"],"names":["AnimationClip","THREE","Bone","Box3","BufferAttribute","BufferGeometry","ClampToEdgeWrapping","Color","DirectionalLight","DoubleSide","FileLoader","FrontSide","Group","ImageBitmapLoader","InterleavedBuffer","InterleavedBufferAttribute","Interpolant","InterpolateDiscrete","InterpolateLinear","Line","LineBasicMaterial","LineLoop","LineSegments","LinearFilter","LinearMipmapLinearFilter","LinearMipmapNearestFilter","Loader","LoaderUtils","Material","MathUtils","Matrix4","Mesh","MeshBasicMaterial","MeshPhysicalMaterial","MeshStandardMaterial","MirroredRepeatWrapping","NearestFilter","NearestMipmapLinearFilter","NearestMipmapNearestFilter","NumberKeyframeTrack","Object3D","OrthographicCamera","PerspectiveCamera","PointLight","Points","PointsMaterial","PropertyBinding","Quaternion","QuaternionKeyframeTrack","RGBFormat","RepeatWrapping","Skeleton","SkinnedMesh","Sphere","SpotLight","TangentSpaceNormalMap","Texture","TextureLoader","TriangleFanDrawMode","TriangleStripDrawMode","Vector2","Vector3","VectorKeyframeTrack","sRGBEncoding","GLTFLoader","manager","dracoLoader","ktx2Loader","meshoptDecoder","pluginCallbacks","register","parser","GLTFMaterialsClearcoatExtension","GLTFTextureBasisUExtension","GLTFTextureWebPExtension","GLTFMaterialsTransmissionExtension","GLTFMaterialsVolumeExtension","GLTFMaterialsIorExtension","GLTFMaterialsSpecularExtension","GLTFLightsExtension","GLTFMeshoptCompression","url","onLoad","onProgress","onError","resourcePath","scope","path","extractUrlBase","itemStart","_onError","e","console","error","itemError","itemEnd","loader","setPath","setResponseType","setRequestHeader","requestHeader","setWithCredentials","withCredentials","load","data","parse","gltf","Error","callback","indexOf","push","splice","content","extensions","plugins","decodeText","Uint8Array","BINARY_EXTENSION_HEADER_MAGIC","EXTENSIONS","KHR_BINARY_GLTF","GLTFBinaryExtension","json","JSON","undefined","asset","version","GLTFParser","crossOrigin","fileLoader","i","length","plugin","name","extensionsUsed","extensionName","extensionsRequired","KHR_MATERIALS_UNLIT","GLTFMaterialsUnlitExtension","KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS","GLTFMaterialsPbrSpecularGlossinessExtension","KHR_DRACO_MESH_COMPRESSION","GLTFDracoMeshCompressionExtension","KHR_TEXTURE_TRANSFORM","GLTFTextureTransformExtension","KHR_MESH_QUANTIZATION","GLTFMeshQuantizationExtension","warn","setExtensions","setPlugins","GLTFRegistry","objects","get","key","add","object","remove","removeAll","KHR_LIGHTS_PUNCTUAL","KHR_MATERIALS_CLEARCOAT","KHR_MATERIALS_IOR","KHR_MATERIALS_SPECULAR","KHR_MATERIALS_TRANSMISSION","KHR_MATERIALS_VOLUME","KHR_TEXTURE_BASISU","EXT_TEXTURE_WEBP","EXT_MESHOPT_COMPRESSION","cache","refs","uses","nodeDefs","nodes","nodeIndex","nodeLength","nodeDef","light","_addNodeRef","lightIndex","cacheKey","dependency","lightNode","lightDef","lights","color","fromArray","range","type","target","position","set","distance","spot","innerConeAngle","outerConeAngle","Math","PI","angle","penumbra","decay","intensity","createUniqueName","Promise","resolve","self","_loadLight","then","_getNodeRef","materialParams","materialDef","pending","opacity","metallicRoughness","pbrMetallicRoughness","Array","isArray","baseColorFactor","array","baseColorTexture","assignTexture","all","materialIndex","materials","extension","clearcoatFactor","clearcoat","clearcoatTexture","clearcoatRoughnessFactor","clearcoatRoughness","clearcoatRoughnessTexture","clearcoatNormalTexture","scale","clearcoatNormalScale","transmissionFactor","transmission","transmissionTexture","thickness","thicknessFactor","thicknessTexture","attenuationDistance","colorArray","attenuationColor","attenuationTint","ior","specularIntensity","specularFactor","specularTexture","specularColorFactor","specularTint","specularColorTexture","texture","encoding","textureIndex","textureDef","textures","source","images","options","loadTextureImage","isSupported","textureLoader","uri","handler","getHandler","detectSupport","loadTexture","image","Image","src","onload","onerror","height","index","bufferView","bufferViews","extensionDef","buffer","getDependency","decoder","supported","ready","res","byteOffset","byteLength","count","stride","byteStride","result","ArrayBuffer","decodeGltfBuffer","mode","filter","BINARY_EXTENSION_HEADER_LENGTH","BINARY_EXTENSION_CHUNK_TYPES","BIN","body","headerView","DataView","header","magic","slice","getUint32","chunkContentsLength","chunkView","chunkIndex","chunkLength","chunkType","contentArray","preload","primitive","bufferViewIndex","gltfAttributeMap","attributes","threeAttributeMap","attributeNormalizedMap","attributeTypeMap","attributeName","threeAttributeName","ATTRIBUTES","toLowerCase","accessorDef","accessors","componentType","WEBGL_COMPONENT_TYPES","normalized","decodeDracoFile","geometry","attribute","transform","texCoord","offset","rotation","clone","repeat","needsUpdate","GLTFMeshStandardSGMaterial","params","isGLTFSpecularGlossinessMaterial","specularMapParsFragmentChunk","join","glossinessMapParsFragmentChunk","specularMapFragmentChunk","glossinessMapFragmentChunk","lightPhysicalFragmentChunk","uniforms","specular","value","setHex","glossiness","specularMap","glossinessMap","_extraUniforms","onBeforeCompile","shader","uniformName","fragmentShader","replace","Object","defineProperties","v","defines","USE_SPECULARMAP","USE_GLOSSINESSMAP","USE_UV","metalness","roughness","metalnessMap","roughnessMap","setValues","copy","specularGlossinessParams","pbrSpecularGlossiness","diffuseFactor","diffuseTexture","emissive","glossinessFactor","specularGlossinessTexture","specGlossMapDef","material","fog","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","normalScale","displacementMap","displacementScale","displacementBias","alphaMap","envMap","envMapIntensity","refractionRatio","GLTFCubicSplineInterpolant","parameterPositions","sampleValues","sampleSize","resultBuffer","values","valueSize","prototype","beforeStart_","copySampleValue_","afterEnd_","interpolate_","i1","t0","t","t1","stride2","stride3","td","p","pp","ppp","offset1","offset0","s2","s3","s0","s1","p0","m0","p1","m1","_q","GLTFCubicSplineQuaternionInterpolant","normalize","toArray","WEBGL_CONSTANTS","FLOAT","FLOAT_MAT3","FLOAT_MAT4","FLOAT_VEC2","FLOAT_VEC3","FLOAT_VEC4","LINEAR","REPEAT","SAMPLER_2D","POINTS","LINES","LINE_LOOP","LINE_STRIP","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN","UNSIGNED_BYTE","UNSIGNED_SHORT","Int8Array","Int16Array","Uint16Array","Uint32Array","Float32Array","WEBGL_FILTERS","WEBGL_WRAPPINGS","WEBGL_TYPE_SIZES","POSITION","NORMAL","TANGENT","TEXCOORD_0","TEXCOORD_1","COLOR_0","WEIGHTS_0","JOINTS_0","PATH_PROPERTIES","translation","weights","INTERPOLATION","CUBICSPLINE","STEP","ALPHA_MODES","OPAQUE","MASK","BLEND","resolveURL","test","createDefaultMaterial","transparent","depthTest","side","addUnknownExtensionsToUserData","knownExtensions","objectDef","userData","gltfExtensions","assignExtrasToUserData","gltfDef","extras","assign","addMorphTargets","targets","hasMorphPosition","hasMorphNormal","il","pendingPositionAccessors","pendingNormalAccessors","pendingAccessor","normal","morphPositions","morphNormals","morphAttributes","morphTargetsRelative","updateMorphTargets","mesh","meshDef","morphTargetInfluences","targetNames","morphTargetDictionary","createPrimitiveKey","primitiveDef","dracoExtension","indices","createAttributesKey","attributesKey","keys","sort","getNormalizedComponentScale","constructor","associations","Map","primitiveCache","meshCache","cameraCache","lightCache","textureCache","nodeNamesUsed","createImageBitmap","navigator","userAgent","setCrossOrigin","_invokeAll","ext","_markDefs","beforeRoot","getDependencies","dependencies","scene","scenes","animations","cameras","afterRoot","catch","skinDefs","skins","meshDefs","meshes","skinIndex","skinLength","joints","isBone","skin","isSkinnedMesh","camera","ref","func","unshift","loadScene","loadNode","_invokeOne","loadMesh","loadAccessor","loadBufferView","loadBuffer","loadMaterial","loadSkin","loadAnimation","loadCamera","defs","def","bufferIndex","bufferDef","buffers","reject","bufferViewDef","accessorIndex","sparse","pendingBufferViews","bufferAttribute","itemSize","TypedArray","elementBytes","BYTES_PER_ELEMENT","itemBytes","ibSlice","floor","ibCacheKey","ib","itemSizeIndices","SCALAR","TypedArrayIndices","byteOffsetIndices","byteOffsetValues","sparseIndices","sparseValues","setX","setY","setZ","setW","sampler","URL","webkitURL","sourceURI","isObjectURL","hasAlpha","isJPEG","search","mimeType","colorType","getUint8","blob","Blob","createObjectURL","promise","isImageBitmapLoader","imageBitmap","revokeObjectURL","flipY","format","samplers","magFilter","minFilter","wrapS","wrapT","mapName","mapDef","gltfReference","extendTexture","useVertexTangents","tangent","useVertexColors","useFlatShading","isPoints","uuid","pointsMaterial","call","sizeAttenuation","isLine","lineMaterial","cachedMaterial","vertexColors","flatShading","y","uv2","uv","setAttribute","materialType","materialExtensions","sgExtension","getMaterialType","extendParams","kmuExtension","metallicFactor","roughnessFactor","metallicRoughnessTexture","extendMaterialParams","doubleSided","alphaMode","depthWrite","alphaTest","alphaCutoff","normalTexture","occlusionTexture","strength","emissiveFactor","emissiveTexture","createMaterial","originalName","sanitizedName","sanitizeNodeName","primitives","createDracoPrimitive","decodePrimitive","addPrimitiveAttributes","cached","geometryPromise","meshIndex","loadGeometries","results","geometries","skinWeight","normalizeSkinWeights","toTrianglesDrawMode","assignFinalMaterial","group","cameraIndex","cameraDef","radToDeg","yfov","aspectRatio","znear","zfar","xmag","ymag","skinDef","skinEntry","inverseBindMatrices","accessor","animationIndex","animationDef","pendingNodes","pendingInputAccessors","pendingOutputAccessors","pendingSamplers","pendingTargets","channels","channel","node","id","input","parameters","output","inputAccessors","outputAccessors","tracks","inputAccessor","outputAccessor","updateMatrix","matrixAutoUpdate","TypedKeyframeTrack","targetName","interpolation","traverse","isMesh","outputArray","scaled","j","jl","track","createInterpolant","times","getValueSize","isInterpolantFactoryMethodGLTFCubicSpline","o","meshPromise","nodeName","createNodeMesh","createNodeAttachment","forEach","matrix","applyMatrix4","quaternion","sceneIndex","sceneDef","nodeIds","buildNodeHierachy","nodeId","parentObject","pendingJoints","jointNodes","bones","boneInverses","jointNode","mat","bind","matrixWorld","children","child","computeBounds","box","min","max","boxScale","multiplyScalar","maxDisplacement","vector","abs","expandByVector","boundingBox","sphere","getCenter","center","radius","distanceTo","boundingSphere","assignAttributeAccessor","gltfAttributeName","setIndex","drawMode","getIndex","getAttribute","numberOfTriangles","newIndices","getX","newGeometry","loadGLTF","loadAudio","AudioLoader","loadVideo","video","document","createElement","addEventListener","loadTextures","paths","promises","window","_position","_quaternion","_scale","CSS3DObject","element","style","pointerEvents","userSelect","Element","parentNode","removeChild","recursive","cloneNode","isCSS3DObject","CSS3DSprite","rotation2D","isCSS3DSprite","_matrix","_matrix2","CSS3DRenderer","_width","_height","_widthHalf","_heightHalf","_this","fov","WeakMap","domElement","overflow","cameraElement","epsilon","getCameraCSSMatrix","elements","getObjectCSSMatrix","transformStyle","appendChild","getSize","width","render","tx","ty","projectionMatrix","perspective","isPerspectiveCamera","autoUpdate","updateMatrixWorld","parent","isOrthographicCamera","right","left","top","bottom","cameraCSSMatrix","matrixWorldInverse","renderObject","onBeforeRender","transpose","multiply","makeRotationZ","decompose","setPosition","cachedObject","objectData","display","visible","onAfterRender","l","setSize","MINDAR","IMAGE","raccoon","loadModel","startMindAR","mindarThree","MindARThree","container","imageTargetSrc","filterMinCF","filterBeta","missTolerance","warmupTolerance","renderer","anchor","addAnchor","PlaneGeometry","plane","HemisphereLight","start","setAnimationLoop","log","startTimer","setTimeout"],"mappings":"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","file":"main210.7adc3b7f.js","sourceRoot":"..","sourcesContent":["\n/*\nimport {\n\tAnimationClip,\n\tBone,\n\tBox3,\n\tBufferAttribute,\n\tBufferGeometry,\n\tClampToEdgeWrapping,\n\tColor,\n\tDirectionalLight,\n\tDoubleSide,\n\tFileLoader,\n\tFrontSide,\n\tGroup,\n\tImageBitmapLoader,\n\tInterleavedBuffer,\n\tInterleavedBufferAttribute,\n\tInterpolant,\n\tInterpolateDiscrete,\n\tInterpolateLinear,\n\tLine,\n\tLineBasicMaterial,\n\tLineLoop,\n\tLineSegments,\n\tLinearFilter,\n\tLinearMipmapLinearFilter,\n\tLinearMipmapNearestFilter,\n\tLoader,\n\tLoaderUtils,\n\tMaterial,\n\tMathUtils,\n\tMatrix4,\n\tMesh,\n\tMeshBasicMaterial,\n\tMeshPhysicalMaterial,\n\tMeshStandardMaterial,\n\tMirroredRepeatWrapping,\n\tNearestFilter,\n\tNearestMipmapLinearFilter,\n\tNearestMipmapNearestFilter,\n\tNumberKeyframeTrack,\n\tObject3D,\n\tOrthographicCamera,\n\tPerspectiveCamera,\n\tPointLight,\n\tPoints,\n\tPointsMaterial,\n\tPropertyBinding,\n\tQuaternion,\n\tQuaternionKeyframeTrack,\n\tRGBFormat,\n\tRepeatWrapping,\n\tSkeleton,\n\tSkinnedMesh,\n\tSphere,\n\tSpotLight,\n\tTangentSpaceNormalMap,\n\tTexture,\n\tTextureLoader,\n\tTriangleFanDrawMode,\n\tTriangleStripDrawMode,\n\tVector2,\n\tVector3,\n\tVectorKeyframeTrack,\n\tsRGBEncoding\n//} from '../../../build/three.module.js';\n} from \"./three.js-r132/build/three.module.js\";\n*/\n///*\n\tconst AnimationClip = THREE.AnimationClip\n\tconst Bone = THREE.Bone\n\tconst Box3 = THREE.Box3\n\tconst BufferAttribute = THREE.BufferAttribute\n\tconst BufferGeometry = THREE.BufferGeometry\n\tconst ClampToEdgeWrapping = THREE.ClampToEdgeWrapping\n\tconst Color = THREE.Color\n\tconst DirectionalLight = THREE.DirectionalLight\n\tconst DoubleSide = THREE.DoubleSide\n\tconst FileLoader = THREE.FileLoader\n\tconst FrontSide = THREE.FrontSide\n\tconst Group = THREE.Group\n\tconst ImageBitmapLoader = THREE.ImageBitmapLoader\n\tconst InterleavedBuffer = THREE.InterleavedBuffer\n\tconst InterleavedBufferAttribute = THREE.InterleavedBufferAttribute\n\tconst Interpolant = THREE.Interpolant\n\tconst InterpolateDiscrete = THREE.InterpolateDiscrete\n\tconst InterpolateLinear = THREE.InterpolateLinear\n\tconst Line = THREE.Line\n\tconst LineBasicMaterial = THREE.LineBasicMaterial\n\tconst LineLoop = THREE.LineLoop\n\tconst LineSegments = THREE.LineSegments\n\tconst LinearFilter = THREE.LinearFilter\n\tconst LinearMipmapLinearFilter = THREE.LinearMipmapLinearFilter\n\tconst LinearMipmapNearestFilter = THREE.LinearMipmapNearestFilter\n\tconst Loader = THREE.Loader\n\tconst LoaderUtils = THREE.LoaderUtils\n\tconst Material = THREE.Material\n\tconst MathUtils = THREE.MathUtils\n\tconst Matrix4 = THREE.Matrix4\n\tconst Mesh = THREE.Mesh\n\tconst MeshBasicMaterial = THREE.MeshBasicMaterial\n\tconst MeshPhysicalMaterial = THREE.MeshPhysicalMaterial\n\tconst MeshStandardMaterial = THREE.MeshStandardMaterial\n\tconst MirroredRepeatWrapping = THREE.MirroredRepeatWrapping\n\tconst NearestFilter = THREE.NearestFilter\n\tconst NearestMipmapLinearFilter = THREE.NearestMipmapLinearFilter\n\tconst NearestMipmapNearestFilter = THREE.NearestMipmapNearestFilter\n\tconst NumberKeyframeTrack = THREE.NumberKeyframeTrack\n\tconst Object3D = THREE.Object3D\n\tconst OrthographicCamera = THREE.OrthographicCamera\n\tconst PerspectiveCamera = THREE.PerspectiveCamera\n\tconst PointLight = THREE.PointLight\n\tconst Points = THREE.Points\n\tconst PointsMaterial = THREE.PointsMaterial\n\tconst PropertyBinding = THREE.PropertyBinding\n\tconst Quaternion = THREE.Quaternion\n\tconst QuaternionKeyframeTrack = THREE.QuaternionKeyframeTrack\n\tconst RGBFormat = THREE.RGBFormat\n\tconst RepeatWrapping = THREE.RepeatWrapping\n\tconst Skeleton = THREE.Skeleton\n\tconst SkinnedMesh = THREE.SkinnedMesh\n\tconst Sphere = THREE.Sphere\n\tconst SpotLight = THREE.SpotLight\n\tconst TangentSpaceNormalMap = THREE.TangentSpaceNormalMap\n\tconst Texture = THREE.Texture\n\tconst TextureLoader = THREE.TextureLoader\n\tconst TriangleFanDrawMode = THREE.TriangleFanDrawMode\n\tconst TriangleStripDrawMode = THREE.TriangleStripDrawMode\n\tconst Vector2 = THREE.Vector2\n\tconst Vector3 = THREE.Vector3\n\tconst VectorKeyframeTrack = THREE.VectorKeyframeTrack\n\tconst sRGBEncoding = THREE.sRGBEncoding\n//*/\nclass GLTFLoader extends THREE.Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t\tthis.dracoLoader = null;\n\t\tthis.ktx2Loader = null;\n\t\tthis.meshoptDecoder = null;\n\n\t\tthis.pluginCallbacks = [];\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsClearcoatExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFTextureBasisUExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFTextureWebPExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsTransmissionExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsVolumeExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsIorExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsSpecularExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFLightsExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMeshoptCompression( parser );\n\n\t\t} );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tlet resourcePath;\n\n\t\tif ( this.resourcePath !== '' ) {\n\n\t\t\tresourcePath = this.resourcePath;\n\n\t\t} else if ( this.path !== '' ) {\n\n\t\t\tresourcePath = this.path;\n\n\t\t} else {\n\n\t\t\tresourcePath = LoaderUtils.extractUrlBase( url );\n\n\t\t}\n\n\t\t// Tells the LoadingManager to track an extra item, which resolves after\n\t\t// the model is fully loaded. This means the count of items loaded will\n\t\t// be incorrect, but ensures manager.onLoad() does not fire early.\n\t\tthis.manager.itemStart( url );\n\n\t\tconst _onError = function ( e ) {\n\n\t\t\tif ( onError ) {\n\n\t\t\t\tonError( e );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.error( e );\n\n\t\t\t}\n\n\t\t\tscope.manager.itemError( url );\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t};\n\n\t\tconst loader = new FileLoader( this.manager );\n\n\t\tloader.setPath( this.path );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\tloader.load( url, function ( data ) {\n\n\t\t\ttry {\n\n\t\t\t\tscope.parse( data, resourcePath, function ( gltf ) {\n\n\t\t\t\t\tonLoad( gltf );\n\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t}, _onError );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\t_onError( e );\n\n\t\t\t}\n\n\t\t}, onProgress, _onError );\n\n\t}\n\n\tsetDRACOLoader( dracoLoader ) {\n\n\t\tthis.dracoLoader = dracoLoader;\n\t\treturn this;\n\n\t}\n\n\tsetDDSLoader() {\n\n\t\tthrow new Error(\n\n\t\t\t'THREE.GLTFLoader: \"MSFT_texture_dds\" no longer supported. Please update to \"KHR_texture_basisu\".'\n\n\t\t);\n\n\t}\n\n\tsetKTX2Loader( ktx2Loader ) {\n\n\t\tthis.ktx2Loader = ktx2Loader;\n\t\treturn this;\n\n\t}\n\n\tsetMeshoptDecoder( meshoptDecoder ) {\n\n\t\tthis.meshoptDecoder = meshoptDecoder;\n\t\treturn this;\n\n\t}\n\n\tregister( callback ) {\n\n\t\tif ( this.pluginCallbacks.indexOf( callback ) === - 1 ) {\n\n\t\t\tthis.pluginCallbacks.push( callback );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tunregister( callback ) {\n\n\t\tif ( this.pluginCallbacks.indexOf( callback ) !== - 1 ) {\n\n\t\t\tthis.pluginCallbacks.splice( this.pluginCallbacks.indexOf( callback ), 1 );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tparse( data, path, onLoad, onError ) {\n\n\t\tlet content;\n\t\tconst extensions = {};\n\t\tconst plugins = {};\n\n\t\tif ( typeof data === 'string' ) {\n\n\t\t\tcontent = data;\n\n\t\t} else {\n\n\t\t\tconst magic = LoaderUtils.decodeText( new Uint8Array( data, 0, 4 ) );\n\n\t\t\tif ( magic === BINARY_EXTENSION_HEADER_MAGIC ) {\n\n\t\t\t\ttry {\n\n\t\t\t\t\textensions[ EXTENSIONS.KHR_BINARY_GLTF ] = new GLTFBinaryExtension( data );\n\n\t\t\t\t} catch ( error ) {\n\n\t\t\t\t\tif ( onError ) onError( error );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tcontent = extensions[ EXTENSIONS.KHR_BINARY_GLTF ].content;\n\n\t\t\t} else {\n\n\t\t\t\tcontent = LoaderUtils.decodeText( new Uint8Array( data ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst json = JSON.parse( content );\n\n\t\tif ( json.asset === undefined || json.asset.version[ 0 ] < 2 ) {\n\n\t\t\tif ( onError ) onError( new Error( 'THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.' ) );\n\t\t\treturn;\n\n\t\t}\n\n\t\tconst parser = new GLTFParser( json, {\n\n\t\t\tpath: path || this.resourcePath || '',\n\t\t\tcrossOrigin: this.crossOrigin,\n\t\t\trequestHeader: this.requestHeader,\n\t\t\tmanager: this.manager,\n\t\t\tktx2Loader: this.ktx2Loader,\n\t\t\tmeshoptDecoder: this.meshoptDecoder\n\n\t\t} );\n\n\t\tparser.fileLoader.setRequestHeader( this.requestHeader );\n\n\t\tfor ( let i = 0; i < this.pluginCallbacks.length; i ++ ) {\n\n\t\t\tconst plugin = this.pluginCallbacks[ i ]( parser );\n\t\t\tplugins[ plugin.name ] = plugin;\n\n\t\t\t// Workaround to avoid determining as unknown extension\n\t\t\t// in addUnknownExtensionsToUserData().\n\t\t\t// Remove this workaround if we move all the existing\n\t\t\t// extension handlers to plugin system\n\t\t\textensions[ plugin.name ] = true;\n\n\t\t}\n\n\t\tif ( json.extensionsUsed ) {\n\n\t\t\tfor ( let i = 0; i < json.extensionsUsed.length; ++ i ) {\n\n\t\t\t\tconst extensionName = json.extensionsUsed[ i ];\n\t\t\t\tconst extensionsRequired = json.extensionsRequired || [];\n\n\t\t\t\tswitch ( extensionName ) {\n\n\t\t\t\t\tcase EXTENSIONS.KHR_MATERIALS_UNLIT:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFMaterialsUnlitExtension();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFMaterialsPbrSpecularGlossinessExtension();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFDracoMeshCompressionExtension( json, this.dracoLoader );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase EXTENSIONS.KHR_TEXTURE_TRANSFORM:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFTextureTransformExtension();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase EXTENSIONS.KHR_MESH_QUANTIZATION:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFMeshQuantizationExtension();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tif ( extensionsRequired.indexOf( extensionName ) >= 0 && plugins[ extensionName ] === undefined ) {\n\n\t\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Unknown extension \"' + extensionName + '\".' );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tparser.setExtensions( extensions );\n\t\tparser.setPlugins( plugins );\n\t\tparser.parse( onLoad, onError );\n\n\t}\n\n}\n\n/* GLTFREGISTRY */\n\nfunction GLTFRegistry() {\n\n\tlet objects = {};\n\n\treturn\t{\n\n\t\tget: function ( key ) {\n\n\t\t\treturn objects[ key ];\n\n\t\t},\n\n\t\tadd: function ( key, object ) {\n\n\t\t\tobjects[ key ] = object;\n\n\t\t},\n\n\t\tremove: function ( key ) {\n\n\t\t\tdelete objects[ key ];\n\n\t\t},\n\n\t\tremoveAll: function () {\n\n\t\t\tobjects = {};\n\n\t\t}\n\n\t};\n\n}\n\n/*********************************/\n/********** EXTENSIONS ***********/\n/*********************************/\n\nconst EXTENSIONS = {\n\tKHR_BINARY_GLTF: 'KHR_binary_glTF',\n\tKHR_DRACO_MESH_COMPRESSION: 'KHR_draco_mesh_compression',\n\tKHR_LIGHTS_PUNCTUAL: 'KHR_lights_punctual',\n\tKHR_MATERIALS_CLEARCOAT: 'KHR_materials_clearcoat',\n\tKHR_MATERIALS_IOR: 'KHR_materials_ior',\n\tKHR_MATERIALS_PBR_SPECULAR_GLOSSINESS: 'KHR_materials_pbrSpecularGlossiness',\n\tKHR_MATERIALS_SPECULAR: 'KHR_materials_specular',\n\tKHR_MATERIALS_TRANSMISSION: 'KHR_materials_transmission',\n\tKHR_MATERIALS_UNLIT: 'KHR_materials_unlit',\n\tKHR_MATERIALS_VOLUME: 'KHR_materials_volume',\n\tKHR_TEXTURE_BASISU: 'KHR_texture_basisu',\n\tKHR_TEXTURE_TRANSFORM: 'KHR_texture_transform',\n\tKHR_MESH_QUANTIZATION: 'KHR_mesh_quantization',\n\tEXT_TEXTURE_WEBP: 'EXT_texture_webp',\n\tEXT_MESHOPT_COMPRESSION: 'EXT_meshopt_compression'\n};\n\n/**\n * Punctual Lights Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_lights_punctual\n */\nclass GLTFLightsExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_LIGHTS_PUNCTUAL;\n\n\t\t// Object3D instance caches\n\t\tthis.cache = { refs: {}, uses: {} };\n\n\t}\n\n\t_markDefs() {\n\n\t\tconst parser = this.parser;\n\t\tconst nodeDefs = this.parser.json.nodes || [];\n\n\t\tfor ( let nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex ++ ) {\n\n\t\t\tconst nodeDef = nodeDefs[ nodeIndex ];\n\n\t\t\tif ( nodeDef.extensions\n\t\t\t\t\t&& nodeDef.extensions[ this.name ]\n\t\t\t\t\t&& nodeDef.extensions[ this.name ].light !== undefined ) {\n\n\t\t\t\tparser._addNodeRef( this.cache, nodeDef.extensions[ this.name ].light );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_loadLight( lightIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst cacheKey = 'light:' + lightIndex;\n\t\tlet dependency = parser.cache.get( cacheKey );\n\n\t\tif ( dependency ) return dependency;\n\n\t\tconst json = parser.json;\n\t\tconst extensions = ( json.extensions && json.extensions[ this.name ] ) || {};\n\t\tconst lightDefs = extensions.lights || [];\n\t\tconst lightDef = lightDefs[ lightIndex ];\n\t\tlet lightNode;\n\n\t\tconst color = new Color( 0xffffff );\n\n\t\tif ( lightDef.color !== undefined ) color.fromArray( lightDef.color );\n\n\t\tconst range = lightDef.range !== undefined ? lightDef.range : 0;\n\n\t\tswitch ( lightDef.type ) {\n\n\t\t\tcase 'directional':\n\t\t\t\tlightNode = new DirectionalLight( color );\n\t\t\t\tlightNode.target.position.set( 0, 0, - 1 );\n\t\t\t\tlightNode.add( lightNode.target );\n\t\t\t\tbreak;\n\n\t\t\tcase 'point':\n\t\t\t\tlightNode = new PointLight( color );\n\t\t\t\tlightNode.distance = range;\n\t\t\t\tbreak;\n\n\t\t\tcase 'spot':\n\t\t\t\tlightNode = new SpotLight( color );\n\t\t\t\tlightNode.distance = range;\n\t\t\t\t// Handle spotlight properties.\n\t\t\t\tlightDef.spot = lightDef.spot || {};\n\t\t\t\tlightDef.spot.innerConeAngle = lightDef.spot.innerConeAngle !== undefined ? lightDef.spot.innerConeAngle : 0;\n\t\t\t\tlightDef.spot.outerConeAngle = lightDef.spot.outerConeAngle !== undefined ? lightDef.spot.outerConeAngle : Math.PI / 4.0;\n\t\t\t\tlightNode.angle = lightDef.spot.outerConeAngle;\n\t\t\t\tlightNode.penumbra = 1.0 - lightDef.spot.innerConeAngle / lightDef.spot.outerConeAngle;\n\t\t\t\tlightNode.target.position.set( 0, 0, - 1 );\n\t\t\t\tlightNode.add( lightNode.target );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Unexpected light type: ' + lightDef.type );\n\n\t\t}\n\n\t\t// Some lights (e.g. spot) default to a position other than the origin. Reset the position\n\t\t// here, because node-level parsing will only override position if explicitly specified.\n\t\tlightNode.position.set( 0, 0, 0 );\n\n\t\tlightNode.decay = 2;\n\n\t\tif ( lightDef.intensity !== undefined ) lightNode.intensity = lightDef.intensity;\n\n\t\tlightNode.name = parser.createUniqueName( lightDef.name || ( 'light_' + lightIndex ) );\n\n\t\tdependency = Promise.resolve( lightNode );\n\n\t\tparser.cache.add( cacheKey, dependency );\n\n\t\treturn dependency;\n\n\t}\n\n\tcreateNodeAttachment( nodeIndex ) {\n\n\t\tconst self = this;\n\t\tconst parser = this.parser;\n\t\tconst json = parser.json;\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\n\t\tconst lightDef = ( nodeDef.extensions && nodeDef.extensions[ this.name ] ) || {};\n\t\tconst lightIndex = lightDef.light;\n\n\t\tif ( lightIndex === undefined ) return null;\n\n\t\treturn this._loadLight( lightIndex ).then( function ( light ) {\n\n\t\t\treturn parser._getNodeRef( self.cache, lightIndex, light );\n\n\t\t} );\n\n\t}\n\n}\n\n/**\n * Unlit Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_unlit\n */\nclass GLTFMaterialsUnlitExtension {\n\n\tconstructor() {\n\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_UNLIT;\n\n\t}\n\n\tgetMaterialType() {\n\n\t\treturn MeshBasicMaterial;\n\n\t}\n\n\textendParams( materialParams, materialDef, parser ) {\n\n\t\tconst pending = [];\n\n\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\n\t\tmaterialParams.opacity = 1.0;\n\n\t\tconst metallicRoughness = materialDef.pbrMetallicRoughness;\n\n\t\tif ( metallicRoughness ) {\n\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\n\n\t\t\t\tconst array = metallicRoughness.baseColorFactor;\n\n\t\t\t\tmaterialParams.color.fromArray( array );\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t}\n\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Clearcoat Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_clearcoat\n */\nclass GLTFMaterialsClearcoatExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_CLEARCOAT;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.clearcoatFactor !== undefined ) {\n\n\t\t\tmaterialParams.clearcoat = extension.clearcoatFactor;\n\n\t\t}\n\n\t\tif ( extension.clearcoatTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatMap', extension.clearcoatTexture ) );\n\n\t\t}\n\n\t\tif ( extension.clearcoatRoughnessFactor !== undefined ) {\n\n\t\t\tmaterialParams.clearcoatRoughness = extension.clearcoatRoughnessFactor;\n\n\t\t}\n\n\t\tif ( extension.clearcoatRoughnessTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatRoughnessMap', extension.clearcoatRoughnessTexture ) );\n\n\t\t}\n\n\t\tif ( extension.clearcoatNormalTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatNormalMap', extension.clearcoatNormalTexture ) );\n\n\t\t\tif ( extension.clearcoatNormalTexture.scale !== undefined ) {\n\n\t\t\t\tconst scale = extension.clearcoatNormalTexture.scale;\n\n\t\t\t\t// https://github.com/mrdoob/three.js/issues/11438#issuecomment-507003995\n\t\t\t\tmaterialParams.clearcoatNormalScale = new Vector2( scale, - scale );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Transmission Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_transmission\n * Draft: https://github.com/KhronosGroup/glTF/pull/1698\n */\nclass GLTFMaterialsTransmissionExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_TRANSMISSION;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.transmissionFactor !== undefined ) {\n\n\t\t\tmaterialParams.transmission = extension.transmissionFactor;\n\n\t\t}\n\n\t\tif ( extension.transmissionTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'transmissionMap', extension.transmissionTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Materials Volume Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_volume\n */\nclass GLTFMaterialsVolumeExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_VOLUME;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tmaterialParams.thickness = extension.thicknessFactor !== undefined ? extension.thicknessFactor : 0;\n\n\t\tif ( extension.thicknessTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'thicknessMap', extension.thicknessTexture ) );\n\n\t\t}\n\n\t\tmaterialParams.attenuationDistance = extension.attenuationDistance || 0;\n\n\t\tconst colorArray = extension.attenuationColor || [ 1, 1, 1 ];\n\t\tmaterialParams.attenuationTint = new Color( colorArray[ 0 ], colorArray[ 1 ], colorArray[ 2 ] );\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Materials ior Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_ior\n */\nclass GLTFMaterialsIorExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_IOR;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tmaterialParams.ior = extension.ior !== undefined ? extension.ior : 1.5;\n\n\t\treturn Promise.resolve();\n\n\t}\n\n}\n\n/**\n * Materials specular Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_specular\n */\nclass GLTFMaterialsSpecularExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_SPECULAR;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tmaterialParams.specularIntensity = extension.specularFactor !== undefined ? extension.specularFactor : 1.0;\n\n\t\tif ( extension.specularTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'specularIntensityMap', extension.specularTexture ) );\n\n\t\t}\n\n\t\tconst colorArray = extension.specularColorFactor || [ 1, 1, 1 ];\n\t\tmaterialParams.specularTint = new Color( colorArray[ 0 ], colorArray[ 1 ], colorArray[ 2 ] );\n\n\t\tif ( extension.specularColorTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'specularTintMap', extension.specularColorTexture ).then( function ( texture ) {\n\n\t\t\t\ttexture.encoding = sRGBEncoding;\n\n\t\t\t} ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * BasisU Texture Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_basisu\n */\nclass GLTFTextureBasisUExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_TEXTURE_BASISU;\n\n\t}\n\n\tloadTexture( textureIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst json = parser.json;\n\n\t\tconst textureDef = json.textures[ textureIndex ];\n\n\t\tif ( ! textureDef.extensions || ! textureDef.extensions[ this.name ] ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst extension = textureDef.extensions[ this.name ];\n\t\tconst source = json.images[ extension.source ];\n\t\tconst loader = parser.options.ktx2Loader;\n\n\t\tif ( ! loader ) {\n\n\t\t\tif ( json.extensionsRequired && json.extensionsRequired.indexOf( this.name ) >= 0 ) {\n\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures' );\n\n\t\t\t} else {\n\n\t\t\t\t// Assumes that the extension is optional and that a fallback texture is present\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn parser.loadTextureImage( textureIndex, source, loader );\n\n\t}\n\n}\n\n/**\n * WebP Texture Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_texture_webp\n */\nclass GLTFTextureWebPExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.EXT_TEXTURE_WEBP;\n\t\tthis.isSupported = null;\n\n\t}\n\n\tloadTexture( textureIndex ) {\n\n\t\tconst name = this.name;\n\t\tconst parser = this.parser;\n\t\tconst json = parser.json;\n\n\t\tconst textureDef = json.textures[ textureIndex ];\n\n\t\tif ( ! textureDef.extensions || ! textureDef.extensions[ name ] ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst extension = textureDef.extensions[ name ];\n\t\tconst source = json.images[ extension.source ];\n\n\t\tlet loader = parser.textureLoader;\n\t\tif ( source.uri ) {\n\n\t\t\tconst handler = parser.options.manager.getHandler( source.uri );\n\t\t\tif ( handler !== null ) loader = handler;\n\n\t\t}\n\n\t\treturn this.detectSupport().then( function ( isSupported ) {\n\n\t\t\tif ( isSupported ) return parser.loadTextureImage( textureIndex, source, loader );\n\n\t\t\tif ( json.extensionsRequired && json.extensionsRequired.indexOf( name ) >= 0 ) {\n\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: WebP required by asset but unsupported.' );\n\n\t\t\t}\n\n\t\t\t// Fall back to PNG or JPEG.\n\t\t\treturn parser.loadTexture( textureIndex );\n\n\t\t} );\n\n\t}\n\n\tdetectSupport() {\n\n\t\tif ( ! this.isSupported ) {\n\n\t\t\tthis.isSupported = new Promise( function ( resolve ) {\n\n\t\t\t\tconst image = new Image();\n\n\t\t\t\t// Lossy test image. Support for lossy images doesn't guarantee support for all\n\t\t\t\t// WebP images, unfortunately.\n\t\t\t\timage.src = 'data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA';\n\n\t\t\t\timage.onload = image.onerror = function () {\n\n\t\t\t\t\tresolve( image.height === 1 );\n\n\t\t\t\t};\n\n\t\t\t} );\n\n\t\t}\n\n\t\treturn this.isSupported;\n\n\t}\n\n}\n\n/**\n * meshopt BufferView Compression Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_meshopt_compression\n */\nclass GLTFMeshoptCompression {\n\n\tconstructor( parser ) {\n\n\t\tthis.name = EXTENSIONS.EXT_MESHOPT_COMPRESSION;\n\t\tthis.parser = parser;\n\n\t}\n\n\tloadBufferView( index ) {\n\n\t\tconst json = this.parser.json;\n\t\tconst bufferView = json.bufferViews[ index ];\n\n\t\tif ( bufferView.extensions && bufferView.extensions[ this.name ] ) {\n\n\t\t\tconst extensionDef = bufferView.extensions[ this.name ];\n\n\t\t\tconst buffer = this.parser.getDependency( 'buffer', extensionDef.buffer );\n\t\t\tconst decoder = this.parser.options.meshoptDecoder;\n\n\t\t\tif ( ! decoder || ! decoder.supported ) {\n\n\t\t\t\tif ( json.extensionsRequired && json.extensionsRequired.indexOf( this.name ) >= 0 ) {\n\n\t\t\t\t\tthrow new Error( 'THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files' );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Assumes that the extension is optional and that fallback buffer data is present\n\t\t\t\t\treturn null;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn Promise.all( [ buffer, decoder.ready ] ).then( function ( res ) {\n\n\t\t\t\tconst byteOffset = extensionDef.byteOffset || 0;\n\t\t\t\tconst byteLength = extensionDef.byteLength || 0;\n\n\t\t\t\tconst count = extensionDef.count;\n\t\t\t\tconst stride = extensionDef.byteStride;\n\n\t\t\t\tconst result = new ArrayBuffer( count * stride );\n\t\t\t\tconst source = new Uint8Array( res[ 0 ], byteOffset, byteLength );\n\n\t\t\t\tdecoder.decodeGltfBuffer( new Uint8Array( result ), count, stride, source, extensionDef.mode, extensionDef.filter );\n\t\t\t\treturn result;\n\n\t\t\t} );\n\n\t\t} else {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t}\n\n}\n\n/* BINARY EXTENSION */\nconst BINARY_EXTENSION_HEADER_MAGIC = 'glTF';\nconst BINARY_EXTENSION_HEADER_LENGTH = 12;\nconst BINARY_EXTENSION_CHUNK_TYPES = { JSON: 0x4E4F534A, BIN: 0x004E4942 };\n\nclass GLTFBinaryExtension {\n\n\tconstructor( data ) {\n\n\t\tthis.name = EXTENSIONS.KHR_BINARY_GLTF;\n\t\tthis.content = null;\n\t\tthis.body = null;\n\n\t\tconst headerView = new DataView( data, 0, BINARY_EXTENSION_HEADER_LENGTH );\n\n\t\tthis.header = {\n\t\t\tmagic: LoaderUtils.decodeText( new Uint8Array( data.slice( 0, 4 ) ) ),\n\t\t\tversion: headerView.getUint32( 4, true ),\n\t\t\tlength: headerView.getUint32( 8, true )\n\t\t};\n\n\t\tif ( this.header.magic !== BINARY_EXTENSION_HEADER_MAGIC ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Unsupported glTF-Binary header.' );\n\n\t\t} else if ( this.header.version < 2.0 ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Legacy binary file detected.' );\n\n\t\t}\n\n\t\tconst chunkContentsLength = this.header.length - BINARY_EXTENSION_HEADER_LENGTH;\n\t\tconst chunkView = new DataView( data, BINARY_EXTENSION_HEADER_LENGTH );\n\t\tlet chunkIndex = 0;\n\n\t\twhile ( chunkIndex < chunkContentsLength ) {\n\n\t\t\tconst chunkLength = chunkView.getUint32( chunkIndex, true );\n\t\t\tchunkIndex += 4;\n\n\t\t\tconst chunkType = chunkView.getUint32( chunkIndex, true );\n\t\t\tchunkIndex += 4;\n\n\t\t\tif ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.JSON ) {\n\n\t\t\t\tconst contentArray = new Uint8Array( data, BINARY_EXTENSION_HEADER_LENGTH + chunkIndex, chunkLength );\n\t\t\t\tthis.content = LoaderUtils.decodeText( contentArray );\n\n\t\t\t} else if ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.BIN ) {\n\n\t\t\t\tconst byteOffset = BINARY_EXTENSION_HEADER_LENGTH + chunkIndex;\n\t\t\t\tthis.body = data.slice( byteOffset, byteOffset + chunkLength );\n\n\t\t\t}\n\n\t\t\t// Clients must ignore chunks with unknown types.\n\n\t\t\tchunkIndex += chunkLength;\n\n\t\t}\n\n\t\tif ( this.content === null ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: JSON content not found.' );\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * DRACO Mesh Compression Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_draco_mesh_compression\n */\nclass GLTFDracoMeshCompressionExtension {\n\n\tconstructor( json, dracoLoader ) {\n\n\t\tif ( ! dracoLoader ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: No DRACOLoader instance provided.' );\n\n\t\t}\n\n\t\tthis.name = EXTENSIONS.KHR_DRACO_MESH_COMPRESSION;\n\t\tthis.json = json;\n\t\tthis.dracoLoader = dracoLoader;\n\t\tthis.dracoLoader.preload();\n\n\t}\n\n\tdecodePrimitive( primitive, parser ) {\n\n\t\tconst json = this.json;\n\t\tconst dracoLoader = this.dracoLoader;\n\t\tconst bufferViewIndex = primitive.extensions[ this.name ].bufferView;\n\t\tconst gltfAttributeMap = primitive.extensions[ this.name ].attributes;\n\t\tconst threeAttributeMap = {};\n\t\tconst attributeNormalizedMap = {};\n\t\tconst attributeTypeMap = {};\n\n\t\tfor ( const attributeName in gltfAttributeMap ) {\n\n\t\t\tconst threeAttributeName = ATTRIBUTES[ attributeName ] || attributeName.toLowerCase();\n\n\t\t\tthreeAttributeMap[ threeAttributeName ] = gltfAttributeMap[ attributeName ];\n\n\t\t}\n\n\t\tfor ( const attributeName in primitive.attributes ) {\n\n\t\t\tconst threeAttributeName = ATTRIBUTES[ attributeName ] || attributeName.toLowerCase();\n\n\t\t\tif ( gltfAttributeMap[ attributeName ] !== undefined ) {\n\n\t\t\t\tconst accessorDef = json.accessors[ primitive.attributes[ attributeName ] ];\n\t\t\t\tconst componentType = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\n\n\t\t\t\tattributeTypeMap[ threeAttributeName ] = componentType;\n\t\t\t\tattributeNormalizedMap[ threeAttributeName ] = accessorDef.normalized === true;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn parser.getDependency( 'bufferView', bufferViewIndex ).then( function ( bufferView ) {\n\n\t\t\treturn new Promise( function ( resolve ) {\n\n\t\t\t\tdracoLoader.decodeDracoFile( bufferView, function ( geometry ) {\n\n\t\t\t\t\tfor ( const attributeName in geometry.attributes ) {\n\n\t\t\t\t\t\tconst attribute = geometry.attributes[ attributeName ];\n\t\t\t\t\t\tconst normalized = attributeNormalizedMap[ attributeName ];\n\n\t\t\t\t\t\tif ( normalized !== undefined ) attribute.normalized = normalized;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tresolve( geometry );\n\n\t\t\t\t}, threeAttributeMap, attributeTypeMap );\n\n\t\t\t} );\n\n\t\t} );\n\n\t}\n\n}\n\n/**\n * Texture Transform Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_transform\n */\nclass GLTFTextureTransformExtension {\n\n\tconstructor() {\n\n\t\tthis.name = EXTENSIONS.KHR_TEXTURE_TRANSFORM;\n\n\t}\n\n\textendTexture( texture, transform ) {\n\n\t\tif ( transform.texCoord !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Custom UV sets in \"' + this.name + '\" extension not yet supported.' );\n\n\t\t}\n\n\t\tif ( transform.offset === undefined && transform.rotation === undefined && transform.scale === undefined ) {\n\n\t\t\t// See https://github.com/mrdoob/three.js/issues/21819.\n\t\t\treturn texture;\n\n\t\t}\n\n\t\ttexture = texture.clone();\n\n\t\tif ( transform.offset !== undefined ) {\n\n\t\t\ttexture.offset.fromArray( transform.offset );\n\n\t\t}\n\n\t\tif ( transform.rotation !== undefined ) {\n\n\t\t\ttexture.rotation = transform.rotation;\n\n\t\t}\n\n\t\tif ( transform.scale !== undefined ) {\n\n\t\t\ttexture.repeat.fromArray( transform.scale );\n\n\t\t}\n\n\t\ttexture.needsUpdate = true;\n\n\t\treturn texture;\n\n\t}\n\n}\n\n/**\n * Specular-Glossiness Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_pbrSpecularGlossiness\n */\n\n/**\n * A sub class of StandardMaterial with some of the functionality\n * changed via the `onBeforeCompile` callback\n * @pailhead\n */\nclass GLTFMeshStandardSGMaterial extends THREE.MeshStandardMaterial {\n\n\tconstructor( params ) {\n\n\t\tsuper();\n\n\t\tthis.isGLTFSpecularGlossinessMaterial = true;\n\n\t\t//various chunks that need replacing\n\t\tconst specularMapParsFragmentChunk = [\n\t\t\t'#ifdef USE_SPECULARMAP',\n\t\t\t'\tuniform sampler2D specularMap;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tconst glossinessMapParsFragmentChunk = [\n\t\t\t'#ifdef USE_GLOSSINESSMAP',\n\t\t\t'\tuniform sampler2D glossinessMap;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tconst specularMapFragmentChunk = [\n\t\t\t'vec3 specularFactor = specular;',\n\t\t\t'#ifdef USE_SPECULARMAP',\n\t\t\t'\tvec4 texelSpecular = texture2D( specularMap, vUv );',\n\t\t\t'\ttexelSpecular = sRGBToLinear( texelSpecular );',\n\t\t\t'\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture',\n\t\t\t'\tspecularFactor *= texelSpecular.rgb;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tconst glossinessMapFragmentChunk = [\n\t\t\t'float glossinessFactor = glossiness;',\n\t\t\t'#ifdef USE_GLOSSINESSMAP',\n\t\t\t'\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );',\n\t\t\t'\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture',\n\t\t\t'\tglossinessFactor *= texelGlossiness.a;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tconst lightPhysicalFragmentChunk = [\n\t\t\t'PhysicalMaterial material;',\n\t\t\t'material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );',\n\t\t\t'vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );',\n\t\t\t'float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );',\n\t\t\t'material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.',\n\t\t\t'material.roughness += geometryRoughness;',\n\t\t\t'material.roughness = min( material.roughness, 1.0 );',\n\t\t\t'material.specularColor = specularFactor;',\n\t\t].join( '\\n' );\n\n\t\tconst uniforms = {\n\t\t\tspecular: { value: new Color().setHex( 0xffffff ) },\n\t\t\tglossiness: { value: 1 },\n\t\t\tspecularMap: { value: null },\n\t\t\tglossinessMap: { value: null }\n\t\t};\n\n\t\tthis._extraUniforms = uniforms;\n\n\t\tthis.onBeforeCompile = function ( shader ) {\n\n\t\t\tfor ( const uniformName in uniforms ) {\n\n\t\t\t\tshader.uniforms[ uniformName ] = uniforms[ uniformName ];\n\n\t\t\t}\n\n\t\t\tshader.fragmentShader = shader.fragmentShader\n\t\t\t\t.replace( 'uniform float roughness;', 'uniform vec3 specular;' )\n\t\t\t\t.replace( 'uniform float metalness;', 'uniform float glossiness;' )\n\t\t\t\t.replace( '#include <roughnessmap_pars_fragment>', specularMapParsFragmentChunk )\n\t\t\t\t.replace( '#include <metalnessmap_pars_fragment>', glossinessMapParsFragmentChunk )\n\t\t\t\t.replace( '#include <roughnessmap_fragment>', specularMapFragmentChunk )\n\t\t\t\t.replace( '#include <metalnessmap_fragment>', glossinessMapFragmentChunk )\n\t\t\t\t.replace( '#include <lights_physical_fragment>', lightPhysicalFragmentChunk );\n\n\t\t};\n\n\t\tObject.defineProperties( this, {\n\n\t\t\tspecular: {\n\t\t\t\tget: function () {\n\n\t\t\t\t\treturn uniforms.specular.value;\n\n\t\t\t\t},\n\t\t\t\tset: function ( v ) {\n\n\t\t\t\t\tuniforms.specular.value = v;\n\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tspecularMap: {\n\t\t\t\tget: function () {\n\n\t\t\t\t\treturn uniforms.specularMap.value;\n\n\t\t\t\t},\n\t\t\t\tset: function ( v ) {\n\n\t\t\t\t\tuniforms.specularMap.value = v;\n\n\t\t\t\t\tif ( v ) {\n\n\t\t\t\t\t\tthis.defines.USE_SPECULARMAP = ''; // USE_UV is set by the renderer for specular maps\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tdelete this.defines.USE_SPECULARMAP;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tglossiness: {\n\t\t\t\tget: function () {\n\n\t\t\t\t\treturn uniforms.glossiness.value;\n\n\t\t\t\t},\n\t\t\t\tset: function ( v ) {\n\n\t\t\t\t\tuniforms.glossiness.value = v;\n\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tglossinessMap: {\n\t\t\t\tget: function () {\n\n\t\t\t\t\treturn uniforms.glossinessMap.value;\n\n\t\t\t\t},\n\t\t\t\tset: function ( v ) {\n\n\t\t\t\t\tuniforms.glossinessMap.value = v;\n\n\t\t\t\t\tif ( v ) {\n\n\t\t\t\t\t\tthis.defines.USE_GLOSSINESSMAP = '';\n\t\t\t\t\t\tthis.defines.USE_UV = '';\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tdelete this.defines.USE_GLOSSINESSMAP;\n\t\t\t\t\t\tdelete this.defines.USE_UV;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t} );\n\n\t\tdelete this.metalness;\n\t\tdelete this.roughness;\n\t\tdelete this.metalnessMap;\n\t\tdelete this.roughnessMap;\n\n\t\tthis.setValues( params );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.specularMap = source.specularMap;\n\t\tthis.specular.copy( source.specular );\n\t\tthis.glossinessMap = source.glossinessMap;\n\t\tthis.glossiness = source.glossiness;\n\t\tdelete this.metalness;\n\t\tdelete this.roughness;\n\t\tdelete this.metalnessMap;\n\t\tdelete this.roughnessMap;\n\t\treturn this;\n\n\t}\n\n}\n\n\nclass GLTFMaterialsPbrSpecularGlossinessExtension {\n\n\tconstructor() {\n\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS;\n\n\t\tthis.specularGlossinessParams = [\n\t\t\t'color',\n\t\t\t'map',\n\t\t\t'lightMap',\n\t\t\t'lightMapIntensity',\n\t\t\t'aoMap',\n\t\t\t'aoMapIntensity',\n\t\t\t'emissive',\n\t\t\t'emissiveIntensity',\n\t\t\t'emissiveMap',\n\t\t\t'bumpMap',\n\t\t\t'bumpScale',\n\t\t\t'normalMap',\n\t\t\t'normalMapType',\n\t\t\t'displacementMap',\n\t\t\t'displacementScale',\n\t\t\t'displacementBias',\n\t\t\t'specularMap',\n\t\t\t'specular',\n\t\t\t'glossinessMap',\n\t\t\t'glossiness',\n\t\t\t'alphaMap',\n\t\t\t'envMap',\n\t\t\t'envMapIntensity',\n\t\t\t'refractionRatio',\n\t\t];\n\n\t}\n\n\tgetMaterialType() {\n\n\t\treturn GLTFMeshStandardSGMaterial;\n\n\t}\n\n\textendParams( materialParams, materialDef, parser ) {\n\n\t\tconst pbrSpecularGlossiness = materialDef.extensions[ this.name ];\n\n\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\n\t\tmaterialParams.opacity = 1.0;\n\n\t\tconst pending = [];\n\n\t\tif ( Array.isArray( pbrSpecularGlossiness.diffuseFactor ) ) {\n\n\t\t\tconst array = pbrSpecularGlossiness.diffuseFactor;\n\n\t\t\tmaterialParams.color.fromArray( array );\n\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t}\n\n\t\tif ( pbrSpecularGlossiness.diffuseTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'map', pbrSpecularGlossiness.diffuseTexture ) );\n\n\t\t}\n\n\t\tmaterialParams.emissive = new Color( 0.0, 0.0, 0.0 );\n\t\tmaterialParams.glossiness = pbrSpecularGlossiness.glossinessFactor !== undefined ? pbrSpecularGlossiness.glossinessFactor : 1.0;\n\t\tmaterialParams.specular = new Color( 1.0, 1.0, 1.0 );\n\n\t\tif ( Array.isArray( pbrSpecularGlossiness.specularFactor ) ) {\n\n\t\t\tmaterialParams.specular.fromArray( pbrSpecularGlossiness.specularFactor );\n\n\t\t}\n\n\t\tif ( pbrSpecularGlossiness.specularGlossinessTexture !== undefined ) {\n\n\t\t\tconst specGlossMapDef = pbrSpecularGlossiness.specularGlossinessTexture;\n\t\t\tpending.push( parser.assignTexture( materialParams, 'glossinessMap', specGlossMapDef ) );\n\t\t\tpending.push( parser.assignTexture( materialParams, 'specularMap', specGlossMapDef ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n\tcreateMaterial( materialParams ) {\n\n\t\tconst material = new GLTFMeshStandardSGMaterial( materialParams );\n\t\tmaterial.fog = true;\n\n\t\tmaterial.color = materialParams.color;\n\n\t\tmaterial.map = materialParams.map === undefined ? null : materialParams.map;\n\n\t\tmaterial.lightMap = null;\n\t\tmaterial.lightMapIntensity = 1.0;\n\n\t\tmaterial.aoMap = materialParams.aoMap === undefined ? null : materialParams.aoMap;\n\t\tmaterial.aoMapIntensity = 1.0;\n\n\t\tmaterial.emissive = materialParams.emissive;\n\t\tmaterial.emissiveIntensity = 1.0;\n\t\tmaterial.emissiveMap = materialParams.emissiveMap === undefined ? null : materialParams.emissiveMap;\n\n\t\tmaterial.bumpMap = materialParams.bumpMap === undefined ? null : materialParams.bumpMap;\n\t\tmaterial.bumpScale = 1;\n\n\t\tmaterial.normalMap = materialParams.normalMap === undefined ? null : materialParams.normalMap;\n\t\tmaterial.normalMapType = TangentSpaceNormalMap;\n\n\t\tif ( materialParams.normalScale ) material.normalScale = materialParams.normalScale;\n\n\t\tmaterial.displacementMap = null;\n\t\tmaterial.displacementScale = 1;\n\t\tmaterial.displacementBias = 0;\n\n\t\tmaterial.specularMap = materialParams.specularMap === undefined ? null : materialParams.specularMap;\n\t\tmaterial.specular = materialParams.specular;\n\n\t\tmaterial.glossinessMap = materialParams.glossinessMap === undefined ? null : materialParams.glossinessMap;\n\t\tmaterial.glossiness = materialParams.glossiness;\n\n\t\tmaterial.alphaMap = null;\n\n\t\tmaterial.envMap = materialParams.envMap === undefined ? null : materialParams.envMap;\n\t\tmaterial.envMapIntensity = 1.0;\n\n\t\tmaterial.refractionRatio = 0.98;\n\n\t\treturn material;\n\n\t}\n\n}\n\n/**\n * Mesh Quantization Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_mesh_quantization\n */\nclass GLTFMeshQuantizationExtension {\n\n\tconstructor() {\n\n\t\tthis.name = EXTENSIONS.KHR_MESH_QUANTIZATION;\n\n\t}\n\n}\n\n/*********************************/\n/********** INTERPOLATION ********/\n/*********************************/\n\n// Spline Interpolation\n// Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#appendix-c-spline-interpolation\nclass GLTFCubicSplineInterpolant extends THREE.Interpolant {\n\n\tconstructor( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\t\tsuper( parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\t}\n\n\tcopySampleValue_( index ) {\n\n\t\t// Copies a sample value to the result buffer. See description of glTF\n\t\t// CUBICSPLINE values layout in interpolate_() function below.\n\n\t\tconst result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tvalueSize = this.valueSize,\n\t\t\toffset = index * valueSize * 3 + valueSize;\n\n\t\tfor ( let i = 0; i !== valueSize; i ++ ) {\n\n\t\t\tresult[ i ] = values[ offset + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n}\n\nGLTFCubicSplineInterpolant.prototype.beforeStart_ = GLTFCubicSplineInterpolant.prototype.copySampleValue_;\n\nGLTFCubicSplineInterpolant.prototype.afterEnd_ = GLTFCubicSplineInterpolant.prototype.copySampleValue_;\n\nGLTFCubicSplineInterpolant.prototype.interpolate_ = function ( i1, t0, t, t1 ) {\n\n\tconst result = this.resultBuffer;\n\tconst values = this.sampleValues;\n\tconst stride = this.valueSize;\n\n\tconst stride2 = stride * 2;\n\tconst stride3 = stride * 3;\n\n\tconst td = t1 - t0;\n\n\tconst p = ( t - t0 ) / td;\n\tconst pp = p * p;\n\tconst ppp = pp * p;\n\n\tconst offset1 = i1 * stride3;\n\tconst offset0 = offset1 - stride3;\n\n\tconst s2 = - 2 * ppp + 3 * pp;\n\tconst s3 = ppp - pp;\n\tconst s0 = 1 - s2;\n\tconst s1 = s3 - pp + p;\n\n\t// Layout of keyframe output values for CUBICSPLINE animations:\n\t//   [ inTangent_1, splineVertex_1, outTangent_1, inTangent_2, splineVertex_2, ... ]\n\tfor ( let i = 0; i !== stride; i ++ ) {\n\n\t\tconst p0 = values[ offset0 + i + stride ]; // splineVertex_k\n\t\tconst m0 = values[ offset0 + i + stride2 ] * td; // outTangent_k * (t_k+1 - t_k)\n\t\tconst p1 = values[ offset1 + i + stride ]; // splineVertex_k+1\n\t\tconst m1 = values[ offset1 + i ] * td; // inTangent_k+1 * (t_k+1 - t_k)\n\n\t\tresult[ i ] = s0 * p0 + s1 * m0 + s2 * p1 + s3 * m1;\n\n\t}\n\n\treturn result;\n\n};\n\nconst _q = new THREE.Quaternion();\n\nclass GLTFCubicSplineQuaternionInterpolant extends GLTFCubicSplineInterpolant {\n\n\tinterpolate_( i1, t0, t, t1 ) {\n\n\t\tconst result = super.interpolate_( i1, t0, t, t1 );\n\n\t\t_q.fromArray( result ).normalize().toArray( result );\n\n\t\treturn result;\n\n\t}\n\n}\n\n\n/*********************************/\n/********** INTERNALS ************/\n/*********************************/\n\n/* CONSTANTS */\n\nconst WEBGL_CONSTANTS = {\n\tFLOAT: 5126,\n\t//FLOAT_MAT2: 35674,\n\tFLOAT_MAT3: 35675,\n\tFLOAT_MAT4: 35676,\n\tFLOAT_VEC2: 35664,\n\tFLOAT_VEC3: 35665,\n\tFLOAT_VEC4: 35666,\n\tLINEAR: 9729,\n\tREPEAT: 10497,\n\tSAMPLER_2D: 35678,\n\tPOINTS: 0,\n\tLINES: 1,\n\tLINE_LOOP: 2,\n\tLINE_STRIP: 3,\n\tTRIANGLES: 4,\n\tTRIANGLE_STRIP: 5,\n\tTRIANGLE_FAN: 6,\n\tUNSIGNED_BYTE: 5121,\n\tUNSIGNED_SHORT: 5123\n};\n\nconst WEBGL_COMPONENT_TYPES = {\n\t5120: Int8Array,\n\t5121: Uint8Array,\n\t5122: Int16Array,\n\t5123: Uint16Array,\n\t5125: Uint32Array,\n\t5126: Float32Array\n};\n\nconst WEBGL_FILTERS = {\n\t9728: NearestFilter,\n\t9729: LinearFilter,\n\t9984: NearestMipmapNearestFilter,\n\t9985: LinearMipmapNearestFilter,\n\t9986: NearestMipmapLinearFilter,\n\t9987: LinearMipmapLinearFilter\n};\n\nconst WEBGL_WRAPPINGS = {\n\t33071: ClampToEdgeWrapping,\n\t33648: MirroredRepeatWrapping,\n\t10497: RepeatWrapping\n};\n\nconst WEBGL_TYPE_SIZES = {\n\t'SCALAR': 1,\n\t'VEC2': 2,\n\t'VEC3': 3,\n\t'VEC4': 4,\n\t'MAT2': 4,\n\t'MAT3': 9,\n\t'MAT4': 16\n};\n\nconst ATTRIBUTES = {\n\tPOSITION: 'position',\n\tNORMAL: 'normal',\n\tTANGENT: 'tangent',\n\tTEXCOORD_0: 'uv',\n\tTEXCOORD_1: 'uv2',\n\tCOLOR_0: 'color',\n\tWEIGHTS_0: 'skinWeight',\n\tJOINTS_0: 'skinIndex',\n};\n\nconst PATH_PROPERTIES = {\n\tscale: 'scale',\n\ttranslation: 'position',\n\trotation: 'quaternion',\n\tweights: 'morphTargetInfluences'\n};\n\nconst INTERPOLATION = {\n\tCUBICSPLINE: undefined, // We use a custom interpolant (GLTFCubicSplineInterpolation) for CUBICSPLINE tracks. Each\n\t\t                        // keyframe track will be initialized with a default interpolation type, then modified.\n\tLINEAR: InterpolateLinear,\n\tSTEP: InterpolateDiscrete\n};\n\nconst ALPHA_MODES = {\n\tOPAQUE: 'OPAQUE',\n\tMASK: 'MASK',\n\tBLEND: 'BLEND'\n};\n\n/* UTILITY FUNCTIONS */\n\nfunction resolveURL( url, path ) {\n\n\t// Invalid URL\n\tif ( typeof url !== 'string' || url === '' ) return '';\n\n\t// Host Relative URL\n\tif ( /^https?:\\/\\//i.test( path ) && /^\\//.test( url ) ) {\n\n\t\tpath = path.replace( /(^https?:\\/\\/[^\\/]+).*/i, '$1' );\n\n\t}\n\n\t// Absolute URL http://,https://,//\n\tif ( /^(https?:)?\\/\\//i.test( url ) ) return url;\n\n\t// Data URI\n\tif ( /^data:.*,.*$/i.test( url ) ) return url;\n\n\t// Blob URL\n\tif ( /^blob:.*$/i.test( url ) ) return url;\n\n\t// Relative URL\n\treturn path + url;\n\n}\n\n/**\n * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#default-material\n */\nfunction createDefaultMaterial( cache ) {\n\n\tif ( cache[ 'DefaultMaterial' ] === undefined ) {\n\n\t\tcache[ 'DefaultMaterial' ] = new MeshStandardMaterial( {\n\t\t\tcolor: 0xFFFFFF,\n\t\t\temissive: 0x000000,\n\t\t\tmetalness: 1,\n\t\t\troughness: 1,\n\t\t\ttransparent: false,\n\t\t\tdepthTest: true,\n\t\t\tside: FrontSide\n\t\t} );\n\n\t}\n\n\treturn cache[ 'DefaultMaterial' ];\n\n}\n\nfunction addUnknownExtensionsToUserData( knownExtensions, object, objectDef ) {\n\n\t// Add unknown glTF extensions to an object's userData.\n\n\tfor ( const name in objectDef.extensions ) {\n\n\t\tif ( knownExtensions[ name ] === undefined ) {\n\n\t\t\tobject.userData.gltfExtensions = object.userData.gltfExtensions || {};\n\t\t\tobject.userData.gltfExtensions[ name ] = objectDef.extensions[ name ];\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * @param {Object3D|Material|BufferGeometry} object\n * @param {GLTF.definition} gltfDef\n */\nfunction assignExtrasToUserData( object, gltfDef ) {\n\n\tif ( gltfDef.extras !== undefined ) {\n\n\t\tif ( typeof gltfDef.extras === 'object' ) {\n\n\t\t\tObject.assign( object.userData, gltfDef.extras );\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Ignoring primitive type .extras, ' + gltfDef.extras );\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#morph-targets\n *\n * @param {BufferGeometry} geometry\n * @param {Array<GLTF.Target>} targets\n * @param {GLTFParser} parser\n * @return {Promise<BufferGeometry>}\n */\nfunction addMorphTargets( geometry, targets, parser ) {\n\n\tlet hasMorphPosition = false;\n\tlet hasMorphNormal = false;\n\n\tfor ( let i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\tconst target = targets[ i ];\n\n\t\tif ( target.POSITION !== undefined ) hasMorphPosition = true;\n\t\tif ( target.NORMAL !== undefined ) hasMorphNormal = true;\n\n\t\tif ( hasMorphPosition && hasMorphNormal ) break;\n\n\t}\n\n\tif ( ! hasMorphPosition && ! hasMorphNormal ) return Promise.resolve( geometry );\n\n\tconst pendingPositionAccessors = [];\n\tconst pendingNormalAccessors = [];\n\n\tfor ( let i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\tconst target = targets[ i ];\n\n\t\tif ( hasMorphPosition ) {\n\n\t\t\tconst pendingAccessor = target.POSITION !== undefined\n\t\t\t\t? parser.getDependency( 'accessor', target.POSITION )\n\t\t\t\t: geometry.attributes.position;\n\n\t\t\tpendingPositionAccessors.push( pendingAccessor );\n\n\t\t}\n\n\t\tif ( hasMorphNormal ) {\n\n\t\t\tconst pendingAccessor = target.NORMAL !== undefined\n\t\t\t\t? parser.getDependency( 'accessor', target.NORMAL )\n\t\t\t\t: geometry.attributes.normal;\n\n\t\t\tpendingNormalAccessors.push( pendingAccessor );\n\n\t\t}\n\n\t}\n\n\treturn Promise.all( [\n\t\tPromise.all( pendingPositionAccessors ),\n\t\tPromise.all( pendingNormalAccessors )\n\t] ).then( function ( accessors ) {\n\n\t\tconst morphPositions = accessors[ 0 ];\n\t\tconst morphNormals = accessors[ 1 ];\n\n\t\tif ( hasMorphPosition ) geometry.morphAttributes.position = morphPositions;\n\t\tif ( hasMorphNormal ) geometry.morphAttributes.normal = morphNormals;\n\t\tgeometry.morphTargetsRelative = true;\n\n\t\treturn geometry;\n\n\t} );\n\n}\n\n/**\n * @param {Mesh} mesh\n * @param {GLTF.Mesh} meshDef\n */\nfunction updateMorphTargets( mesh, meshDef ) {\n\n\tmesh.updateMorphTargets();\n\n\tif ( meshDef.weights !== undefined ) {\n\n\t\tfor ( let i = 0, il = meshDef.weights.length; i < il; i ++ ) {\n\n\t\t\tmesh.morphTargetInfluences[ i ] = meshDef.weights[ i ];\n\n\t\t}\n\n\t}\n\n\t// .extras has user-defined data, so check that .extras.targetNames is an array.\n\tif ( meshDef.extras && Array.isArray( meshDef.extras.targetNames ) ) {\n\n\t\tconst targetNames = meshDef.extras.targetNames;\n\n\t\tif ( mesh.morphTargetInfluences.length === targetNames.length ) {\n\n\t\t\tmesh.morphTargetDictionary = {};\n\n\t\t\tfor ( let i = 0, il = targetNames.length; i < il; i ++ ) {\n\n\t\t\t\tmesh.morphTargetDictionary[ targetNames[ i ] ] = i;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.' );\n\n\t\t}\n\n\t}\n\n}\n\nfunction createPrimitiveKey( primitiveDef ) {\n\n\tconst dracoExtension = primitiveDef.extensions && primitiveDef.extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ];\n\tlet geometryKey;\n\n\tif ( dracoExtension ) {\n\n\t\tgeometryKey = 'draco:' + dracoExtension.bufferView\n\t\t\t\t+ ':' + dracoExtension.indices\n\t\t\t\t+ ':' + createAttributesKey( dracoExtension.attributes );\n\n\t} else {\n\n\t\tgeometryKey = primitiveDef.indices + ':' + createAttributesKey( primitiveDef.attributes ) + ':' + primitiveDef.mode;\n\n\t}\n\n\treturn geometryKey;\n\n}\n\nfunction createAttributesKey( attributes ) {\n\n\tlet attributesKey = '';\n\n\tconst keys = Object.keys( attributes ).sort();\n\n\tfor ( let i = 0, il = keys.length; i < il; i ++ ) {\n\n\t\tattributesKey += keys[ i ] + ':' + attributes[ keys[ i ] ] + ';';\n\n\t}\n\n\treturn attributesKey;\n\n}\n\nfunction getNormalizedComponentScale( constructor ) {\n\n\t// Reference:\n\t// https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_mesh_quantization#encoding-quantized-data\n\n\tswitch ( constructor ) {\n\n\t\tcase Int8Array:\n\t\t\treturn 1 / 127;\n\n\t\tcase Uint8Array:\n\t\t\treturn 1 / 255;\n\n\t\tcase Int16Array:\n\t\t\treturn 1 / 32767;\n\n\t\tcase Uint16Array:\n\t\t\treturn 1 / 65535;\n\n\t\tdefault:\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Unsupported normalized accessor component type.' );\n\n\t}\n\n}\n\n/* GLTF PARSER */\n\nclass GLTFParser {\n\n\tconstructor( json = {}, options = {} ) {\n\n\t\tthis.json = json;\n\t\tthis.extensions = {};\n\t\tthis.plugins = {};\n\t\tthis.options = options;\n\n\t\t// loader object cache\n\t\tthis.cache = new GLTFRegistry();\n\n\t\t// associations between Three.js objects and glTF elements\n\t\tthis.associations = new Map();\n\n\t\t// BufferGeometry caching\n\t\tthis.primitiveCache = {};\n\n\t\t// Object3D instance caches\n\t\tthis.meshCache = { refs: {}, uses: {} };\n\t\tthis.cameraCache = { refs: {}, uses: {} };\n\t\tthis.lightCache = { refs: {}, uses: {} };\n\n\t\tthis.textureCache = {};\n\n\t\t// Track node names, to ensure no duplicates\n\t\tthis.nodeNamesUsed = {};\n\n\t\t// Use an ImageBitmapLoader if imageBitmaps are supported. Moves much of the\n\t\t// expensive work of uploading a texture to the GPU off the main thread.\n\t\tif ( typeof createImageBitmap !== 'undefined' && /Firefox/.test( navigator.userAgent ) === false ) {\n\n\t\t\tthis.textureLoader = new ImageBitmapLoader( this.options.manager );\n\n\t\t} else {\n\n\t\t\tthis.textureLoader = new TextureLoader( this.options.manager );\n\n\t\t}\n\n\t\tthis.textureLoader.setCrossOrigin( this.options.crossOrigin );\n\t\tthis.textureLoader.setRequestHeader( this.options.requestHeader );\n\n\t\tthis.fileLoader = new FileLoader( this.options.manager );\n\t\tthis.fileLoader.setResponseType( 'arraybuffer' );\n\n\t\tif ( this.options.crossOrigin === 'use-credentials' ) {\n\n\t\t\tthis.fileLoader.setWithCredentials( true );\n\n\t\t}\n\n\t}\n\n\tsetExtensions( extensions ) {\n\n\t\tthis.extensions = extensions;\n\n\t}\n\n\tsetPlugins( plugins ) {\n\n\t\tthis.plugins = plugins;\n\n\t}\n\n\tparse( onLoad, onError ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\n\t\t// Clear the loader cache\n\t\tthis.cache.removeAll();\n\n\t\t// Mark the special nodes/meshes in json for efficient parse\n\t\tthis._invokeAll( function ( ext ) {\n\n\t\t\treturn ext._markDefs && ext._markDefs();\n\n\t\t} );\n\n\t\tPromise.all( this._invokeAll( function ( ext ) {\n\n\t\t\treturn ext.beforeRoot && ext.beforeRoot();\n\n\t\t} ) ).then( function () {\n\n\t\t\treturn Promise.all( [\n\n\t\t\t\tparser.getDependencies( 'scene' ),\n\t\t\t\tparser.getDependencies( 'animation' ),\n\t\t\t\tparser.getDependencies( 'camera' ),\n\n\t\t\t] );\n\n\t\t} ).then( function ( dependencies ) {\n\n\t\t\tconst result = {\n\t\t\t\tscene: dependencies[ 0 ][ json.scene || 0 ],\n\t\t\t\tscenes: dependencies[ 0 ],\n\t\t\t\tanimations: dependencies[ 1 ],\n\t\t\t\tcameras: dependencies[ 2 ],\n\t\t\t\tasset: json.asset,\n\t\t\t\tparser: parser,\n\t\t\t\tuserData: {}\n\t\t\t};\n\n\t\t\taddUnknownExtensionsToUserData( extensions, result, json );\n\n\t\t\tassignExtrasToUserData( result, json );\n\n\t\t\tPromise.all( parser._invokeAll( function ( ext ) {\n\n\t\t\t\treturn ext.afterRoot && ext.afterRoot( result );\n\n\t\t\t} ) ).then( function () {\n\n\t\t\t\tonLoad( result );\n\n\t\t\t} );\n\n\t\t} ).catch( onError );\n\n\t}\n\n\t/**\n\t * Marks the special nodes/meshes in json for efficient parse.\n\t */\n\t_markDefs() {\n\n\t\tconst nodeDefs = this.json.nodes || [];\n\t\tconst skinDefs = this.json.skins || [];\n\t\tconst meshDefs = this.json.meshes || [];\n\n\t\t// Nothing in the node definition indicates whether it is a Bone or an\n\t\t// Object3D. Use the skins' joint references to mark bones.\n\t\tfor ( let skinIndex = 0, skinLength = skinDefs.length; skinIndex < skinLength; skinIndex ++ ) {\n\n\t\t\tconst joints = skinDefs[ skinIndex ].joints;\n\n\t\t\tfor ( let i = 0, il = joints.length; i < il; i ++ ) {\n\n\t\t\t\tnodeDefs[ joints[ i ] ].isBone = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Iterate over all nodes, marking references to shared resources,\n\t\t// as well as skeleton joints.\n\t\tfor ( let nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex ++ ) {\n\n\t\t\tconst nodeDef = nodeDefs[ nodeIndex ];\n\n\t\t\tif ( nodeDef.mesh !== undefined ) {\n\n\t\t\t\tthis._addNodeRef( this.meshCache, nodeDef.mesh );\n\n\t\t\t\t// Nothing in the mesh definition indicates whether it is\n\t\t\t\t// a SkinnedMesh or Mesh. Use the node's mesh reference\n\t\t\t\t// to mark SkinnedMesh if node has skin.\n\t\t\t\tif ( nodeDef.skin !== undefined ) {\n\n\t\t\t\t\tmeshDefs[ nodeDef.mesh ].isSkinnedMesh = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.camera !== undefined ) {\n\n\t\t\t\tthis._addNodeRef( this.cameraCache, nodeDef.camera );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Counts references to shared node / Object3D resources. These resources\n\t * can be reused, or \"instantiated\", at multiple nodes in the scene\n\t * hierarchy. Mesh, Camera, and Light instances are instantiated and must\n\t * be marked. Non-scenegraph resources (like Materials, Geometries, and\n\t * Textures) can be reused directly and are not marked here.\n\t *\n\t * Example: CesiumMilkTruck sample model reuses \"Wheel\" meshes.\n\t */\n\t_addNodeRef( cache, index ) {\n\n\t\tif ( index === undefined ) return;\n\n\t\tif ( cache.refs[ index ] === undefined ) {\n\n\t\t\tcache.refs[ index ] = cache.uses[ index ] = 0;\n\n\t\t}\n\n\t\tcache.refs[ index ] ++;\n\n\t}\n\n\t/** Returns a reference to a shared resource, cloning it if necessary. */\n\t_getNodeRef( cache, index, object ) {\n\n\t\tif ( cache.refs[ index ] <= 1 ) return object;\n\n\t\tconst ref = object.clone();\n\n\t\tref.name += '_instance_' + ( cache.uses[ index ] ++ );\n\n\t\treturn ref;\n\n\t}\n\n\t_invokeOne( func ) {\n\n\t\tconst extensions = Object.values( this.plugins );\n\t\textensions.push( this );\n\n\t\tfor ( let i = 0; i < extensions.length; i ++ ) {\n\n\t\t\tconst result = func( extensions[ i ] );\n\n\t\t\tif ( result ) return result;\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\t_invokeAll( func ) {\n\n\t\tconst extensions = Object.values( this.plugins );\n\t\textensions.unshift( this );\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0; i < extensions.length; i ++ ) {\n\n\t\t\tconst result = func( extensions[ i ] );\n\n\t\t\tif ( result ) pending.push( result );\n\n\t\t}\n\n\t\treturn pending;\n\n\t}\n\n\t/**\n\t * Requests the specified dependency asynchronously, with caching.\n\t * @param {string} type\n\t * @param {number} index\n\t * @return {Promise<Object3D|Material|THREE.Texture|AnimationClip|ArrayBuffer|Object>}\n\t */\n\tgetDependency( type, index ) {\n\n\t\tconst cacheKey = type + ':' + index;\n\t\tlet dependency = this.cache.get( cacheKey );\n\n\t\tif ( ! dependency ) {\n\n\t\t\tswitch ( type ) {\n\n\t\t\t\tcase 'scene':\n\t\t\t\t\tdependency = this.loadScene( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'node':\n\t\t\t\t\tdependency = this.loadNode( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'mesh':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadMesh && ext.loadMesh( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'accessor':\n\t\t\t\t\tdependency = this.loadAccessor( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'bufferView':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadBufferView && ext.loadBufferView( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'buffer':\n\t\t\t\t\tdependency = this.loadBuffer( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'material':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadMaterial && ext.loadMaterial( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'texture':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadTexture && ext.loadTexture( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'skin':\n\t\t\t\t\tdependency = this.loadSkin( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'animation':\n\t\t\t\t\tdependency = this.loadAnimation( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'camera':\n\t\t\t\t\tdependency = this.loadCamera( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error( 'Unknown type: ' + type );\n\n\t\t\t}\n\n\t\t\tthis.cache.add( cacheKey, dependency );\n\n\t\t}\n\n\t\treturn dependency;\n\n\t}\n\n\t/**\n\t * Requests all dependencies of the specified type asynchronously, with caching.\n\t * @param {string} type\n\t * @return {Promise<Array<Object>>}\n\t */\n\tgetDependencies( type ) {\n\n\t\tlet dependencies = this.cache.get( type );\n\n\t\tif ( ! dependencies ) {\n\n\t\t\tconst parser = this;\n\t\t\tconst defs = this.json[ type + ( type === 'mesh' ? 'es' : 's' ) ] || [];\n\n\t\t\tdependencies = Promise.all( defs.map( function ( def, index ) {\n\n\t\t\t\treturn parser.getDependency( type, index );\n\n\t\t\t} ) );\n\n\t\t\tthis.cache.add( type, dependencies );\n\n\t\t}\n\n\t\treturn dependencies;\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n\t * @param {number} bufferIndex\n\t * @return {Promise<ArrayBuffer>}\n\t */\n\tloadBuffer( bufferIndex ) {\n\n\t\tconst bufferDef = this.json.buffers[ bufferIndex ];\n\t\tconst loader = this.fileLoader;\n\n\t\tif ( bufferDef.type && bufferDef.type !== 'arraybuffer' ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: ' + bufferDef.type + ' buffer type is not supported.' );\n\n\t\t}\n\n\t\t// If present, GLB container is required to be the first buffer.\n\t\tif ( bufferDef.uri === undefined && bufferIndex === 0 ) {\n\n\t\t\treturn Promise.resolve( this.extensions[ EXTENSIONS.KHR_BINARY_GLTF ].body );\n\n\t\t}\n\n\t\tconst options = this.options;\n\n\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\tloader.load( resolveURL( bufferDef.uri, options.path ), resolve, undefined, function () {\n\n\t\t\t\treject( new Error( 'THREE.GLTFLoader: Failed to load buffer \"' + bufferDef.uri + '\".' ) );\n\n\t\t\t} );\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n\t * @param {number} bufferViewIndex\n\t * @return {Promise<ArrayBuffer>}\n\t */\n\tloadBufferView( bufferViewIndex ) {\n\n\t\tconst bufferViewDef = this.json.bufferViews[ bufferViewIndex ];\n\n\t\treturn this.getDependency( 'buffer', bufferViewDef.buffer ).then( function ( buffer ) {\n\n\t\t\tconst byteLength = bufferViewDef.byteLength || 0;\n\t\t\tconst byteOffset = bufferViewDef.byteOffset || 0;\n\t\t\treturn buffer.slice( byteOffset, byteOffset + byteLength );\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#accessors\n\t * @param {number} accessorIndex\n\t * @return {Promise<BufferAttribute|InterleavedBufferAttribute>}\n\t */\n\tloadAccessor( accessorIndex ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\n\t\tconst accessorDef = this.json.accessors[ accessorIndex ];\n\n\t\tif ( accessorDef.bufferView === undefined && accessorDef.sparse === undefined ) {\n\n\t\t\t// Ignore empty accessors, which may be used to declare runtime\n\t\t\t// information about attributes coming from another source (e.g. Draco\n\t\t\t// compression extension).\n\t\t\treturn Promise.resolve( null );\n\n\t\t}\n\n\t\tconst pendingBufferViews = [];\n\n\t\tif ( accessorDef.bufferView !== undefined ) {\n\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.bufferView ) );\n\n\t\t} else {\n\n\t\t\tpendingBufferViews.push( null );\n\n\t\t}\n\n\t\tif ( accessorDef.sparse !== undefined ) {\n\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.indices.bufferView ) );\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.values.bufferView ) );\n\n\t\t}\n\n\t\treturn Promise.all( pendingBufferViews ).then( function ( bufferViews ) {\n\n\t\t\tconst bufferView = bufferViews[ 0 ];\n\n\t\t\tconst itemSize = WEBGL_TYPE_SIZES[ accessorDef.type ];\n\t\t\tconst TypedArray = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\n\n\t\t\t// For VEC3: itemSize is 3, elementBytes is 4, itemBytes is 12.\n\t\t\tconst elementBytes = TypedArray.BYTES_PER_ELEMENT;\n\t\t\tconst itemBytes = elementBytes * itemSize;\n\t\t\tconst byteOffset = accessorDef.byteOffset || 0;\n\t\t\tconst byteStride = accessorDef.bufferView !== undefined ? json.bufferViews[ accessorDef.bufferView ].byteStride : undefined;\n\t\t\tconst normalized = accessorDef.normalized === true;\n\t\t\tlet array, bufferAttribute;\n\n\t\t\t// The buffer is not interleaved if the stride is the item size in bytes.\n\t\t\tif ( byteStride && byteStride !== itemBytes ) {\n\n\t\t\t\t// Each \"slice\" of the buffer, as defined by 'count' elements of 'byteStride' bytes, gets its own InterleavedBuffer\n\t\t\t\t// This makes sure that IBA.count reflects accessor.count properly\n\t\t\t\tconst ibSlice = Math.floor( byteOffset / byteStride );\n\t\t\t\tconst ibCacheKey = 'InterleavedBuffer:' + accessorDef.bufferView + ':' + accessorDef.componentType + ':' + ibSlice + ':' + accessorDef.count;\n\t\t\t\tlet ib = parser.cache.get( ibCacheKey );\n\n\t\t\t\tif ( ! ib ) {\n\n\t\t\t\t\tarray = new TypedArray( bufferView, ibSlice * byteStride, accessorDef.count * byteStride / elementBytes );\n\n\t\t\t\t\t// Integer parameters to IB/IBA are in array elements, not bytes.\n\t\t\t\t\tib = new InterleavedBuffer( array, byteStride / elementBytes );\n\n\t\t\t\t\tparser.cache.add( ibCacheKey, ib );\n\n\t\t\t\t}\n\n\t\t\t\tbufferAttribute = new InterleavedBufferAttribute( ib, itemSize, ( byteOffset % byteStride ) / elementBytes, normalized );\n\n\t\t\t} else {\n\n\t\t\t\tif ( bufferView === null ) {\n\n\t\t\t\t\tarray = new TypedArray( accessorDef.count * itemSize );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tarray = new TypedArray( bufferView, byteOffset, accessorDef.count * itemSize );\n\n\t\t\t\t}\n\n\t\t\t\tbufferAttribute = new BufferAttribute( array, itemSize, normalized );\n\n\t\t\t}\n\n\t\t\t// https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#sparse-accessors\n\t\t\tif ( accessorDef.sparse !== undefined ) {\n\n\t\t\t\tconst itemSizeIndices = WEBGL_TYPE_SIZES.SCALAR;\n\t\t\t\tconst TypedArrayIndices = WEBGL_COMPONENT_TYPES[ accessorDef.sparse.indices.componentType ];\n\n\t\t\t\tconst byteOffsetIndices = accessorDef.sparse.indices.byteOffset || 0;\n\t\t\t\tconst byteOffsetValues = accessorDef.sparse.values.byteOffset || 0;\n\n\t\t\t\tconst sparseIndices = new TypedArrayIndices( bufferViews[ 1 ], byteOffsetIndices, accessorDef.sparse.count * itemSizeIndices );\n\t\t\t\tconst sparseValues = new TypedArray( bufferViews[ 2 ], byteOffsetValues, accessorDef.sparse.count * itemSize );\n\n\t\t\t\tif ( bufferView !== null ) {\n\n\t\t\t\t\t// Avoid modifying the original ArrayBuffer, if the bufferView wasn't initialized with zeroes.\n\t\t\t\t\tbufferAttribute = new BufferAttribute( bufferAttribute.array.slice(), bufferAttribute.itemSize, bufferAttribute.normalized );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( let i = 0, il = sparseIndices.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst index = sparseIndices[ i ];\n\n\t\t\t\t\tbufferAttribute.setX( index, sparseValues[ i * itemSize ] );\n\t\t\t\t\tif ( itemSize >= 2 ) bufferAttribute.setY( index, sparseValues[ i * itemSize + 1 ] );\n\t\t\t\t\tif ( itemSize >= 3 ) bufferAttribute.setZ( index, sparseValues[ i * itemSize + 2 ] );\n\t\t\t\t\tif ( itemSize >= 4 ) bufferAttribute.setW( index, sparseValues[ i * itemSize + 3 ] );\n\t\t\t\t\tif ( itemSize >= 5 ) throw new Error( 'THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn bufferAttribute;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#textures\n\t * @param {number} textureIndex\n\t * @return {Promise<THREE.Texture>}\n\t */\n\tloadTexture( textureIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst options = this.options;\n\t\tconst textureDef = json.textures[ textureIndex ];\n\t\tconst source = json.images[ textureDef.source ];\n\n\t\tlet loader = this.textureLoader;\n\n\t\tif ( source.uri ) {\n\n\t\t\tconst handler = options.manager.getHandler( source.uri );\n\t\t\tif ( handler !== null ) loader = handler;\n\n\t\t}\n\n\t\treturn this.loadTextureImage( textureIndex, source, loader );\n\n\t}\n\n\tloadTextureImage( textureIndex, source, loader ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\t\tconst options = this.options;\n\n\t\tconst textureDef = json.textures[ textureIndex ];\n\n\t\tconst cacheKey = ( source.uri || source.bufferView ) + ':' + textureDef.sampler;\n\n\t\tif ( this.textureCache[ cacheKey ] ) {\n\n\t\t\t// See https://github.com/mrdoob/three.js/issues/21559.\n\t\t\treturn this.textureCache[ cacheKey ];\n\n\t\t}\n\n\t\tconst URL = self.URL || self.webkitURL;\n\n\t\tlet sourceURI = source.uri || '';\n\t\tlet isObjectURL = false;\n\t\tlet hasAlpha = true;\n\n\t\tconst isJPEG = sourceURI.search( /\\.jpe?g($|\\?)/i ) > 0 || sourceURI.search( /^data\\:image\\/jpeg/ ) === 0;\n\n\t\tif ( source.mimeType === 'image/jpeg' || isJPEG ) hasAlpha = false;\n\n\t\tif ( source.bufferView !== undefined ) {\n\n\t\t\t// Load binary image data from bufferView, if provided.\n\n\t\t\tsourceURI = parser.getDependency( 'bufferView', source.bufferView ).then( function ( bufferView ) {\n\n\t\t\t\tif ( source.mimeType === 'image/png' ) {\n\n\t\t\t\t\t// Inspect the PNG 'IHDR' chunk to determine whether the image could have an\n\t\t\t\t\t// alpha channel. This check is conservative  the image could have an alpha\n\t\t\t\t\t// channel with all values == 1, and the indexed type (colorType == 3) only\n\t\t\t\t\t// sometimes contains alpha.\n\t\t\t\t\t//\n\t\t\t\t\t// https://en.wikipedia.org/wiki/Portable_Network_Graphics#File_header\n\t\t\t\t\tconst colorType = new DataView( bufferView, 25, 1 ).getUint8( 0, false );\n\t\t\t\t\thasAlpha = colorType === 6 || colorType === 4 || colorType === 3;\n\n\t\t\t\t}\n\n\t\t\t\tisObjectURL = true;\n\t\t\t\tconst blob = new Blob( [ bufferView ], { type: source.mimeType } );\n\t\t\t\tsourceURI = URL.createObjectURL( blob );\n\t\t\t\treturn sourceURI;\n\n\t\t\t} );\n\n\t\t} else if ( source.uri === undefined ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Image ' + textureIndex + ' is missing URI and bufferView' );\n\n\t\t}\n\n\t\tconst promise = Promise.resolve( sourceURI ).then( function ( sourceURI ) {\n\n\t\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\t\tlet onLoad = resolve;\n\n\t\t\t\tif ( loader.isImageBitmapLoader === true ) {\n\n\t\t\t\t\tonLoad = function ( imageBitmap ) {\n\n\t\t\t\t\t\tconst texture = new Texture( imageBitmap );\n\t\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\t\tresolve( texture );\n\n\t\t\t\t\t};\n\n\t\t\t\t}\n\n\t\t\t\tloader.load( resolveURL( sourceURI, options.path ), onLoad, undefined, reject );\n\n\t\t\t} );\n\n\t\t} ).then( function ( texture ) {\n\n\t\t\t// Clean up resources and configure Texture.\n\n\t\t\tif ( isObjectURL === true ) {\n\n\t\t\t\tURL.revokeObjectURL( sourceURI );\n\n\t\t\t}\n\n\t\t\ttexture.flipY = false;\n\n\t\t\tif ( textureDef.name ) texture.name = textureDef.name;\n\n\t\t\t// When there is definitely no alpha channel in the texture, set RGBFormat to save space.\n\t\t\tif ( ! hasAlpha ) texture.format = RGBFormat;\n\n\t\t\tconst samplers = json.samplers || {};\n\t\t\tconst sampler = samplers[ textureDef.sampler ] || {};\n\n\t\t\ttexture.magFilter = WEBGL_FILTERS[ sampler.magFilter ] || LinearFilter;\n\t\t\ttexture.minFilter = WEBGL_FILTERS[ sampler.minFilter ] || LinearMipmapLinearFilter;\n\t\t\ttexture.wrapS = WEBGL_WRAPPINGS[ sampler.wrapS ] || RepeatWrapping;\n\t\t\ttexture.wrapT = WEBGL_WRAPPINGS[ sampler.wrapT ] || RepeatWrapping;\n\n\t\t\tparser.associations.set( texture, {\n\t\t\t\ttype: 'textures',\n\t\t\t\tindex: textureIndex\n\t\t\t} );\n\n\t\t\treturn texture;\n\n\t\t} ).catch( function () {\n\n\t\t\tconsole.error( 'THREE.GLTFLoader: Couldn\\'t load texture', sourceURI );\n\t\t\treturn null;\n\n\t\t} );\n\n\t\tthis.textureCache[ cacheKey ] = promise;\n\n\t\treturn promise;\n\n\t}\n\n\t/**\n\t * Asynchronously assigns a texture to the given material parameters.\n\t * @param {Object} materialParams\n\t * @param {string} mapName\n\t * @param {Object} mapDef\n\t * @return {Promise<Texture>}\n\t */\n\tassignTexture( materialParams, mapName, mapDef ) {\n\n\t\tconst parser = this;\n\n\t\treturn this.getDependency( 'texture', mapDef.index ).then( function ( texture ) {\n\n\t\t\t// Materials sample aoMap from UV set 1 and other maps from UV set 0 - this can't be configured\n\t\t\t// However, we will copy UV set 0 to UV set 1 on demand for aoMap\n\t\t\tif ( mapDef.texCoord !== undefined && mapDef.texCoord != 0 && ! ( mapName === 'aoMap' && mapDef.texCoord == 1 ) ) {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Custom UV set ' + mapDef.texCoord + ' for texture ' + mapName + ' not yet supported.' );\n\n\t\t\t}\n\n\t\t\tif ( parser.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ] ) {\n\n\t\t\t\tconst transform = mapDef.extensions !== undefined ? mapDef.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ] : undefined;\n\n\t\t\t\tif ( transform ) {\n\n\t\t\t\t\tconst gltfReference = parser.associations.get( texture );\n\t\t\t\t\ttexture = parser.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ].extendTexture( texture, transform );\n\t\t\t\t\tparser.associations.set( texture, gltfReference );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tmaterialParams[ mapName ] = texture;\n\n\t\t\treturn texture;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Assigns final material to a Mesh, Line, or Points instance. The instance\n\t * already has a material (generated from the glTF material options alone)\n\t * but reuse of the same glTF material may require multiple threejs materials\n\t * to accommodate different primitive types, defines, etc. New materials will\n\t * be created if necessary, and reused from a cache.\n\t * @param  {Object3D} mesh Mesh, Line, or Points instance.\n\t */\n\tassignFinalMaterial( mesh ) {\n\n\t\tconst geometry = mesh.geometry;\n\t\tlet material = mesh.material;\n\n\t\tconst useVertexTangents = geometry.attributes.tangent !== undefined;\n\t\tconst useVertexColors = geometry.attributes.color !== undefined;\n\t\tconst useFlatShading = geometry.attributes.normal === undefined;\n\n\t\tif ( mesh.isPoints ) {\n\n\t\t\tconst cacheKey = 'PointsMaterial:' + material.uuid;\n\n\t\t\tlet pointsMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! pointsMaterial ) {\n\n\t\t\t\tpointsMaterial = new PointsMaterial();\n\t\t\t\tMaterial.prototype.copy.call( pointsMaterial, material );\n\t\t\t\tpointsMaterial.color.copy( material.color );\n\t\t\t\tpointsMaterial.map = material.map;\n\t\t\t\tpointsMaterial.sizeAttenuation = false; // glTF spec says points should be 1px\n\n\t\t\t\tthis.cache.add( cacheKey, pointsMaterial );\n\n\t\t\t}\n\n\t\t\tmaterial = pointsMaterial;\n\n\t\t} else if ( mesh.isLine ) {\n\n\t\t\tconst cacheKey = 'LineBasicMaterial:' + material.uuid;\n\n\t\t\tlet lineMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! lineMaterial ) {\n\n\t\t\t\tlineMaterial = new LineBasicMaterial();\n\t\t\t\tMaterial.prototype.copy.call( lineMaterial, material );\n\t\t\t\tlineMaterial.color.copy( material.color );\n\n\t\t\t\tthis.cache.add( cacheKey, lineMaterial );\n\n\t\t\t}\n\n\t\t\tmaterial = lineMaterial;\n\n\t\t}\n\n\t\t// Clone the material if it will be modified\n\t\tif ( useVertexTangents || useVertexColors || useFlatShading ) {\n\n\t\t\tlet cacheKey = 'ClonedMaterial:' + material.uuid + ':';\n\n\t\t\tif ( material.isGLTFSpecularGlossinessMaterial ) cacheKey += 'specular-glossiness:';\n\t\t\tif ( useVertexTangents ) cacheKey += 'vertex-tangents:';\n\t\t\tif ( useVertexColors ) cacheKey += 'vertex-colors:';\n\t\t\tif ( useFlatShading ) cacheKey += 'flat-shading:';\n\n\t\t\tlet cachedMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! cachedMaterial ) {\n\n\t\t\t\tcachedMaterial = material.clone();\n\n\t\t\t\tif ( useVertexColors ) cachedMaterial.vertexColors = true;\n\t\t\t\tif ( useFlatShading ) cachedMaterial.flatShading = true;\n\n\t\t\t\tif ( useVertexTangents ) {\n\n\t\t\t\t\t// https://github.com/mrdoob/three.js/issues/11438#issuecomment-507003995\n\t\t\t\t\tif ( cachedMaterial.normalScale ) cachedMaterial.normalScale.y *= - 1;\n\t\t\t\t\tif ( cachedMaterial.clearcoatNormalScale ) cachedMaterial.clearcoatNormalScale.y *= - 1;\n\n\t\t\t\t}\n\n\t\t\t\tthis.cache.add( cacheKey, cachedMaterial );\n\n\t\t\t\tthis.associations.set( cachedMaterial, this.associations.get( material ) );\n\n\t\t\t}\n\n\t\t\tmaterial = cachedMaterial;\n\n\t\t}\n\n\t\t// workarounds for mesh and geometry\n\n\t\tif ( material.aoMap && geometry.attributes.uv2 === undefined && geometry.attributes.uv !== undefined ) {\n\n\t\t\tgeometry.setAttribute( 'uv2', geometry.attributes.uv );\n\n\t\t}\n\n\t\tmesh.material = material;\n\n\t}\n\n\tgetMaterialType( /* materialIndex */ ) {\n\n\t\treturn MeshStandardMaterial;\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#materials\n\t * @param {number} materialIndex\n\t * @return {Promise<Material>}\n\t */\n\tloadMaterial( materialIndex ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\t\tconst materialDef = json.materials[ materialIndex ];\n\n\t\tlet materialType;\n\t\tconst materialParams = {};\n\t\tconst materialExtensions = materialDef.extensions || {};\n\n\t\tconst pending = [];\n\n\t\tif ( materialExtensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ] ) {\n\n\t\t\tconst sgExtension = extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ];\n\t\t\tmaterialType = sgExtension.getMaterialType();\n\t\t\tpending.push( sgExtension.extendParams( materialParams, materialDef, parser ) );\n\n\t\t} else if ( materialExtensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ] ) {\n\n\t\t\tconst kmuExtension = extensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ];\n\t\t\tmaterialType = kmuExtension.getMaterialType();\n\t\t\tpending.push( kmuExtension.extendParams( materialParams, materialDef, parser ) );\n\n\t\t} else {\n\n\t\t\t// Specification:\n\t\t\t// https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#metallic-roughness-material\n\n\t\t\tconst metallicRoughness = materialDef.pbrMetallicRoughness || {};\n\n\t\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\n\t\t\tmaterialParams.opacity = 1.0;\n\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\n\n\t\t\t\tconst array = metallicRoughness.baseColorFactor;\n\n\t\t\t\tmaterialParams.color.fromArray( array );\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t}\n\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture ) );\n\n\t\t\t}\n\n\t\t\tmaterialParams.metalness = metallicRoughness.metallicFactor !== undefined ? metallicRoughness.metallicFactor : 1.0;\n\t\t\tmaterialParams.roughness = metallicRoughness.roughnessFactor !== undefined ? metallicRoughness.roughnessFactor : 1.0;\n\n\t\t\tif ( metallicRoughness.metallicRoughnessTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'metalnessMap', metallicRoughness.metallicRoughnessTexture ) );\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'roughnessMap', metallicRoughness.metallicRoughnessTexture ) );\n\n\t\t\t}\n\n\t\t\tmaterialType = this._invokeOne( function ( ext ) {\n\n\t\t\t\treturn ext.getMaterialType && ext.getMaterialType( materialIndex );\n\n\t\t\t} );\n\n\t\t\tpending.push( Promise.all( this._invokeAll( function ( ext ) {\n\n\t\t\t\treturn ext.extendMaterialParams && ext.extendMaterialParams( materialIndex, materialParams );\n\n\t\t\t} ) ) );\n\n\t\t}\n\n\t\tif ( materialDef.doubleSided === true ) {\n\n\t\t\tmaterialParams.side = DoubleSide;\n\n\t\t}\n\n\t\tconst alphaMode = materialDef.alphaMode || ALPHA_MODES.OPAQUE;\n\n\t\tif ( alphaMode === ALPHA_MODES.BLEND ) {\n\n\t\t\tmaterialParams.transparent = true;\n\n\t\t\t// See: https://github.com/mrdoob/three.js/issues/17706\n\t\t\tmaterialParams.depthWrite = false;\n\n\t\t} else {\n\n\t\t\tmaterialParams.format = RGBFormat;\n\t\t\tmaterialParams.transparent = false;\n\n\t\t\tif ( alphaMode === ALPHA_MODES.MASK ) {\n\n\t\t\t\tmaterialParams.alphaTest = materialDef.alphaCutoff !== undefined ? materialDef.alphaCutoff : 0.5;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.normalTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'normalMap', materialDef.normalTexture ) );\n\n\t\t\t// https://github.com/mrdoob/three.js/issues/11438#issuecomment-507003995\n\t\t\tmaterialParams.normalScale = new Vector2( 1, - 1 );\n\n\t\t\tif ( materialDef.normalTexture.scale !== undefined ) {\n\n\t\t\t\tmaterialParams.normalScale.set( materialDef.normalTexture.scale, - materialDef.normalTexture.scale );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.occlusionTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'aoMap', materialDef.occlusionTexture ) );\n\n\t\t\tif ( materialDef.occlusionTexture.strength !== undefined ) {\n\n\t\t\t\tmaterialParams.aoMapIntensity = materialDef.occlusionTexture.strength;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.emissiveFactor !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tmaterialParams.emissive = new Color().fromArray( materialDef.emissiveFactor );\n\n\t\t}\n\n\t\tif ( materialDef.emissiveTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'emissiveMap', materialDef.emissiveTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending ).then( function () {\n\n\t\t\tlet material;\n\n\t\t\tif ( materialType === GLTFMeshStandardSGMaterial ) {\n\n\t\t\t\tmaterial = extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ].createMaterial( materialParams );\n\n\t\t\t} else {\n\n\t\t\t\tmaterial = new materialType( materialParams );\n\n\t\t\t}\n\n\t\t\tif ( materialDef.name ) material.name = materialDef.name;\n\n\t\t\t// baseColorTexture, emissiveTexture, and specularGlossinessTexture use sRGB encoding.\n\t\t\tif ( material.map ) material.map.encoding = sRGBEncoding;\n\t\t\tif ( material.emissiveMap ) material.emissiveMap.encoding = sRGBEncoding;\n\n\t\t\tassignExtrasToUserData( material, materialDef );\n\n\t\t\tparser.associations.set( material, { type: 'materials', index: materialIndex } );\n\n\t\t\tif ( materialDef.extensions ) addUnknownExtensionsToUserData( extensions, material, materialDef );\n\n\t\t\treturn material;\n\n\t\t} );\n\n\t}\n\n\t/** When Object3D instances are targeted by animation, they need unique names. */\n\tcreateUniqueName( originalName ) {\n\n\t\tconst sanitizedName = PropertyBinding.sanitizeNodeName( originalName || '' );\n\n\t\tlet name = sanitizedName;\n\n\t\tfor ( let i = 1; this.nodeNamesUsed[ name ]; ++ i ) {\n\n\t\t\tname = sanitizedName + '_' + i;\n\n\t\t}\n\n\t\tthis.nodeNamesUsed[ name ] = true;\n\n\t\treturn name;\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#geometry\n\t *\n\t * Creates BufferGeometries from primitives.\n\t *\n\t * @param {Array<GLTF.Primitive>} primitives\n\t * @return {Promise<Array<BufferGeometry>>}\n\t */\n\tloadGeometries( primitives ) {\n\n\t\tconst parser = this;\n\t\tconst extensions = this.extensions;\n\t\tconst cache = this.primitiveCache;\n\n\t\tfunction createDracoPrimitive( primitive ) {\n\n\t\t\treturn extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ]\n\t\t\t\t.decodePrimitive( primitive, parser )\n\t\t\t\t.then( function ( geometry ) {\n\n\t\t\t\t\treturn addPrimitiveAttributes( geometry, primitive, parser );\n\n\t\t\t\t} );\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0, il = primitives.length; i < il; i ++ ) {\n\n\t\t\tconst primitive = primitives[ i ];\n\t\t\tconst cacheKey = createPrimitiveKey( primitive );\n\n\t\t\t// See if we've already created this geometry\n\t\t\tconst cached = cache[ cacheKey ];\n\n\t\t\tif ( cached ) {\n\n\t\t\t\t// Use the cached geometry if it exists\n\t\t\t\tpending.push( cached.promise );\n\n\t\t\t} else {\n\n\t\t\t\tlet geometryPromise;\n\n\t\t\t\tif ( primitive.extensions && primitive.extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ] ) {\n\n\t\t\t\t\t// Use DRACO geometry if available\n\t\t\t\t\tgeometryPromise = createDracoPrimitive( primitive );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Otherwise create a new geometry\n\t\t\t\t\tgeometryPromise = addPrimitiveAttributes( new BufferGeometry(), primitive, parser );\n\n\t\t\t\t}\n\n\t\t\t\t// Cache this geometry\n\t\t\t\tcache[ cacheKey ] = { primitive: primitive, promise: geometryPromise };\n\n\t\t\t\tpending.push( geometryPromise );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#meshes\n\t * @param {number} meshIndex\n\t * @return {Promise<Group|Mesh|SkinnedMesh>}\n\t */\n\tloadMesh( meshIndex ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\n\t\tconst meshDef = json.meshes[ meshIndex ];\n\t\tconst primitives = meshDef.primitives;\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0, il = primitives.length; i < il; i ++ ) {\n\n\t\t\tconst material = primitives[ i ].material === undefined\n\t\t\t\t? createDefaultMaterial( this.cache )\n\t\t\t\t: this.getDependency( 'material', primitives[ i ].material );\n\n\t\t\tpending.push( material );\n\n\t\t}\n\n\t\tpending.push( parser.loadGeometries( primitives ) );\n\n\t\treturn Promise.all( pending ).then( function ( results ) {\n\n\t\t\tconst materials = results.slice( 0, results.length - 1 );\n\t\t\tconst geometries = results[ results.length - 1 ];\n\n\t\t\tconst meshes = [];\n\n\t\t\tfor ( let i = 0, il = geometries.length; i < il; i ++ ) {\n\n\t\t\t\tconst geometry = geometries[ i ];\n\t\t\t\tconst primitive = primitives[ i ];\n\n\t\t\t\t// 1. create Mesh\n\n\t\t\t\tlet mesh;\n\n\t\t\t\tconst material = materials[ i ];\n\n\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLES ||\n\t\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ||\n\t\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ||\n\t\t\t\t\t\tprimitive.mode === undefined ) {\n\n\t\t\t\t\t// .isSkinnedMesh isn't in glTF spec. See ._markDefs()\n\t\t\t\t\tmesh = meshDef.isSkinnedMesh === true\n\t\t\t\t\t\t? new SkinnedMesh( geometry, material )\n\t\t\t\t\t\t: new Mesh( geometry, material );\n\n\t\t\t\t\tif ( mesh.isSkinnedMesh === true && ! mesh.geometry.attributes.skinWeight.normalized ) {\n\n\t\t\t\t\t\t// we normalize floating point skin weight array to fix malformed assets (see #15319)\n\t\t\t\t\t\t// it's important to skip this for non-float32 data since normalizeSkinWeights assumes non-normalized inputs\n\t\t\t\t\t\tmesh.normalizeSkinWeights();\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ) {\n\n\t\t\t\t\t\tmesh.geometry = toTrianglesDrawMode( mesh.geometry, TriangleStripDrawMode );\n\n\t\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ) {\n\n\t\t\t\t\t\tmesh.geometry = toTrianglesDrawMode( mesh.geometry, TriangleFanDrawMode );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINES ) {\n\n\t\t\t\t\tmesh = new LineSegments( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_STRIP ) {\n\n\t\t\t\t\tmesh = new Line( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_LOOP ) {\n\n\t\t\t\t\tmesh = new LineLoop( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.POINTS ) {\n\n\t\t\t\t\tmesh = new Points( geometry, material );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Primitive mode unsupported: ' + primitive.mode );\n\n\t\t\t\t}\n\n\t\t\t\tif ( Object.keys( mesh.geometry.morphAttributes ).length > 0 ) {\n\n\t\t\t\t\tupdateMorphTargets( mesh, meshDef );\n\n\t\t\t\t}\n\n\t\t\t\tmesh.name = parser.createUniqueName( meshDef.name || ( 'mesh_' + meshIndex ) );\n\n\t\t\t\tassignExtrasToUserData( mesh, meshDef );\n\n\t\t\t\tif ( primitive.extensions ) addUnknownExtensionsToUserData( extensions, mesh, primitive );\n\n\t\t\t\tparser.assignFinalMaterial( mesh );\n\n\t\t\t\tmeshes.push( mesh );\n\n\t\t\t}\n\n\t\t\tif ( meshes.length === 1 ) {\n\n\t\t\t\treturn meshes[ 0 ];\n\n\t\t\t}\n\n\t\t\tconst group = new Group();\n\n\t\t\tfor ( let i = 0, il = meshes.length; i < il; i ++ ) {\n\n\t\t\t\tgroup.add( meshes[ i ] );\n\n\t\t\t}\n\n\t\t\treturn group;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#cameras\n\t * @param {number} cameraIndex\n\t * @return {Promise<THREE.Camera>}\n\t */\n\tloadCamera( cameraIndex ) {\n\n\t\tlet camera;\n\t\tconst cameraDef = this.json.cameras[ cameraIndex ];\n\t\tconst params = cameraDef[ cameraDef.type ];\n\n\t\tif ( ! params ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing camera parameters.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( cameraDef.type === 'perspective' ) {\n\n\t\t\tcamera = new PerspectiveCamera( MathUtils.radToDeg( params.yfov ), params.aspectRatio || 1, params.znear || 1, params.zfar || 2e6 );\n\n\t\t} else if ( cameraDef.type === 'orthographic' ) {\n\n\t\t\tcamera = new OrthographicCamera( - params.xmag, params.xmag, params.ymag, - params.ymag, params.znear, params.zfar );\n\n\t\t}\n\n\t\tif ( cameraDef.name ) camera.name = this.createUniqueName( cameraDef.name );\n\n\t\tassignExtrasToUserData( camera, cameraDef );\n\n\t\treturn Promise.resolve( camera );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#skins\n\t * @param {number} skinIndex\n\t * @return {Promise<Object>}\n\t */\n\tloadSkin( skinIndex ) {\n\n\t\tconst skinDef = this.json.skins[ skinIndex ];\n\n\t\tconst skinEntry = { joints: skinDef.joints };\n\n\t\tif ( skinDef.inverseBindMatrices === undefined ) {\n\n\t\t\treturn Promise.resolve( skinEntry );\n\n\t\t}\n\n\t\treturn this.getDependency( 'accessor', skinDef.inverseBindMatrices ).then( function ( accessor ) {\n\n\t\t\tskinEntry.inverseBindMatrices = accessor;\n\n\t\t\treturn skinEntry;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#animations\n\t * @param {number} animationIndex\n\t * @return {Promise<AnimationClip>}\n\t */\n\tloadAnimation( animationIndex ) {\n\n\t\tconst json = this.json;\n\n\t\tconst animationDef = json.animations[ animationIndex ];\n\n\t\tconst pendingNodes = [];\n\t\tconst pendingInputAccessors = [];\n\t\tconst pendingOutputAccessors = [];\n\t\tconst pendingSamplers = [];\n\t\tconst pendingTargets = [];\n\n\t\tfor ( let i = 0, il = animationDef.channels.length; i < il; i ++ ) {\n\n\t\t\tconst channel = animationDef.channels[ i ];\n\t\t\tconst sampler = animationDef.samplers[ channel.sampler ];\n\t\t\tconst target = channel.target;\n\t\t\tconst name = target.node !== undefined ? target.node : target.id; // NOTE: target.id is deprecated.\n\t\t\tconst input = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.input ] : sampler.input;\n\t\t\tconst output = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.output ] : sampler.output;\n\n\t\t\tpendingNodes.push( this.getDependency( 'node', name ) );\n\t\t\tpendingInputAccessors.push( this.getDependency( 'accessor', input ) );\n\t\t\tpendingOutputAccessors.push( this.getDependency( 'accessor', output ) );\n\t\t\tpendingSamplers.push( sampler );\n\t\t\tpendingTargets.push( target );\n\n\t\t}\n\n\t\treturn Promise.all( [\n\n\t\t\tPromise.all( pendingNodes ),\n\t\t\tPromise.all( pendingInputAccessors ),\n\t\t\tPromise.all( pendingOutputAccessors ),\n\t\t\tPromise.all( pendingSamplers ),\n\t\t\tPromise.all( pendingTargets )\n\n\t\t] ).then( function ( dependencies ) {\n\n\t\t\tconst nodes = dependencies[ 0 ];\n\t\t\tconst inputAccessors = dependencies[ 1 ];\n\t\t\tconst outputAccessors = dependencies[ 2 ];\n\t\t\tconst samplers = dependencies[ 3 ];\n\t\t\tconst targets = dependencies[ 4 ];\n\n\t\t\tconst tracks = [];\n\n\t\t\tfor ( let i = 0, il = nodes.length; i < il; i ++ ) {\n\n\t\t\t\tconst node = nodes[ i ];\n\t\t\t\tconst inputAccessor = inputAccessors[ i ];\n\t\t\t\tconst outputAccessor = outputAccessors[ i ];\n\t\t\t\tconst sampler = samplers[ i ];\n\t\t\t\tconst target = targets[ i ];\n\n\t\t\t\tif ( node === undefined ) continue;\n\n\t\t\t\tnode.updateMatrix();\n\t\t\t\tnode.matrixAutoUpdate = true;\n\n\t\t\t\tlet TypedKeyframeTrack;\n\n\t\t\t\tswitch ( PATH_PROPERTIES[ target.path ] ) {\n\n\t\t\t\t\tcase PATH_PROPERTIES.weights:\n\n\t\t\t\t\t\tTypedKeyframeTrack = NumberKeyframeTrack;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase PATH_PROPERTIES.rotation:\n\n\t\t\t\t\t\tTypedKeyframeTrack = QuaternionKeyframeTrack;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase PATH_PROPERTIES.position:\n\t\t\t\t\tcase PATH_PROPERTIES.scale:\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tTypedKeyframeTrack = VectorKeyframeTrack;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tconst targetName = node.name ? node.name : node.uuid;\n\n\t\t\t\tconst interpolation = sampler.interpolation !== undefined ? INTERPOLATION[ sampler.interpolation ] : InterpolateLinear;\n\n\t\t\t\tconst targetNames = [];\n\n\t\t\t\tif ( PATH_PROPERTIES[ target.path ] === PATH_PROPERTIES.weights ) {\n\n\t\t\t\t\t// Node may be a Group (glTF mesh with several primitives) or a Mesh.\n\t\t\t\t\tnode.traverse( function ( object ) {\n\n\t\t\t\t\t\tif ( object.isMesh === true && object.morphTargetInfluences ) {\n\n\t\t\t\t\t\t\ttargetNames.push( object.name ? object.name : object.uuid );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} );\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttargetNames.push( targetName );\n\n\t\t\t\t}\n\n\t\t\t\tlet outputArray = outputAccessor.array;\n\n\t\t\t\tif ( outputAccessor.normalized ) {\n\n\t\t\t\t\tconst scale = getNormalizedComponentScale( outputArray.constructor );\n\t\t\t\t\tconst scaled = new Float32Array( outputArray.length );\n\n\t\t\t\t\tfor ( let j = 0, jl = outputArray.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\tscaled[ j ] = outputArray[ j ] * scale;\n\n\t\t\t\t\t}\n\n\t\t\t\t\toutputArray = scaled;\n\n\t\t\t\t}\n\n\t\t\t\tfor ( let j = 0, jl = targetNames.length; j < jl; j ++ ) {\n\n\t\t\t\t\tconst track = new TypedKeyframeTrack(\n\t\t\t\t\t\ttargetNames[ j ] + '.' + PATH_PROPERTIES[ target.path ],\n\t\t\t\t\t\tinputAccessor.array,\n\t\t\t\t\t\toutputArray,\n\t\t\t\t\t\tinterpolation\n\t\t\t\t\t);\n\n\t\t\t\t\t// Override interpolation with custom factory method.\n\t\t\t\t\tif ( sampler.interpolation === 'CUBICSPLINE' ) {\n\n\t\t\t\t\t\ttrack.createInterpolant = function InterpolantFactoryMethodGLTFCubicSpline( result ) {\n\n\t\t\t\t\t\t\t// A CUBICSPLINE keyframe in glTF has three output values for each input value,\n\t\t\t\t\t\t\t// representing inTangent, splineVertex, and outTangent. As a result, track.getValueSize()\n\t\t\t\t\t\t\t// must be divided by three to get the interpolant's sampleSize argument.\n\n\t\t\t\t\t\t\tconst interpolantType = ( this instanceof QuaternionKeyframeTrack ) ? GLTFCubicSplineQuaternionInterpolant : GLTFCubicSplineInterpolant;\n\n\t\t\t\t\t\t\treturn new interpolantType( this.times, this.values, this.getValueSize() / 3, result );\n\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// Mark as CUBICSPLINE. `track.getInterpolation()` doesn't support custom interpolants.\n\t\t\t\t\t\ttrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttracks.push( track );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst name = animationDef.name ? animationDef.name : 'animation_' + animationIndex;\n\n\t\t\treturn new AnimationClip( name, undefined, tracks );\n\n\t\t} );\n\n\t}\n\n\tcreateNodeMesh( nodeIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst parser = this;\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\n\n\t\tif ( nodeDef.mesh === undefined ) return null;\n\n\t\treturn parser.getDependency( 'mesh', nodeDef.mesh ).then( function ( mesh ) {\n\n\t\t\tconst node = parser._getNodeRef( parser.meshCache, nodeDef.mesh, mesh );\n\n\t\t\t// if weights are provided on the node, override weights on the mesh.\n\t\t\tif ( nodeDef.weights !== undefined ) {\n\n\t\t\t\tnode.traverse( function ( o ) {\n\n\t\t\t\t\tif ( ! o.isMesh ) return;\n\n\t\t\t\t\tfor ( let i = 0, il = nodeDef.weights.length; i < il; i ++ ) {\n\n\t\t\t\t\t\to.morphTargetInfluences[ i ] = nodeDef.weights[ i ];\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\treturn node;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#nodes-and-hierarchy\n\t * @param {number} nodeIndex\n\t * @return {Promise<Object3D>}\n\t */\n\tloadNode( nodeIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\t\tconst parser = this;\n\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\n\n\t\t// reserve node's name before its dependencies, so the root has the intended name.\n\t\tconst nodeName = nodeDef.name ? parser.createUniqueName( nodeDef.name ) : '';\n\n\t\treturn ( function () {\n\n\t\t\tconst pending = [];\n\n\t\t\tconst meshPromise = parser._invokeOne( function ( ext ) {\n\n\t\t\t\treturn ext.createNodeMesh && ext.createNodeMesh( nodeIndex );\n\n\t\t\t} );\n\n\t\t\tif ( meshPromise ) {\n\n\t\t\t\tpending.push( meshPromise );\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.camera !== undefined ) {\n\n\t\t\t\tpending.push( parser.getDependency( 'camera', nodeDef.camera ).then( function ( camera ) {\n\n\t\t\t\t\treturn parser._getNodeRef( parser.cameraCache, nodeDef.camera, camera );\n\n\t\t\t\t} ) );\n\n\t\t\t}\n\n\t\t\tparser._invokeAll( function ( ext ) {\n\n\t\t\t\treturn ext.createNodeAttachment && ext.createNodeAttachment( nodeIndex );\n\n\t\t\t} ).forEach( function ( promise ) {\n\n\t\t\t\tpending.push( promise );\n\n\t\t\t} );\n\n\t\t\treturn Promise.all( pending );\n\n\t\t}() ).then( function ( objects ) {\n\n\t\t\tlet node;\n\n\t\t\t// .isBone isn't in glTF spec. See ._markDefs\n\t\t\tif ( nodeDef.isBone === true ) {\n\n\t\t\t\tnode = new Bone();\n\n\t\t\t} else if ( objects.length > 1 ) {\n\n\t\t\t\tnode = new Group();\n\n\t\t\t} else if ( objects.length === 1 ) {\n\n\t\t\t\tnode = objects[ 0 ];\n\n\t\t\t} else {\n\n\t\t\t\tnode = new Object3D();\n\n\t\t\t}\n\n\t\t\tif ( node !== objects[ 0 ] ) {\n\n\t\t\t\tfor ( let i = 0, il = objects.length; i < il; i ++ ) {\n\n\t\t\t\t\tnode.add( objects[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.name ) {\n\n\t\t\t\tnode.userData.name = nodeDef.name;\n\t\t\t\tnode.name = nodeName;\n\n\t\t\t}\n\n\t\t\tassignExtrasToUserData( node, nodeDef );\n\n\t\t\tif ( nodeDef.extensions ) addUnknownExtensionsToUserData( extensions, node, nodeDef );\n\n\t\t\tif ( nodeDef.matrix !== undefined ) {\n\n\t\t\t\tconst matrix = new Matrix4();\n\t\t\t\tmatrix.fromArray( nodeDef.matrix );\n\t\t\t\tnode.applyMatrix4( matrix );\n\n\t\t\t} else {\n\n\t\t\t\tif ( nodeDef.translation !== undefined ) {\n\n\t\t\t\t\tnode.position.fromArray( nodeDef.translation );\n\n\t\t\t\t}\n\n\t\t\t\tif ( nodeDef.rotation !== undefined ) {\n\n\t\t\t\t\tnode.quaternion.fromArray( nodeDef.rotation );\n\n\t\t\t\t}\n\n\t\t\t\tif ( nodeDef.scale !== undefined ) {\n\n\t\t\t\t\tnode.scale.fromArray( nodeDef.scale );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tparser.associations.set( node, { type: 'nodes', index: nodeIndex } );\n\n\t\t\treturn node;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#scenes\n\t * @param {number} sceneIndex\n\t * @return {Promise<Group>}\n\t */\n\tloadScene( sceneIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\t\tconst sceneDef = this.json.scenes[ sceneIndex ];\n\t\tconst parser = this;\n\n\t\t// Loader returns Group, not Scene.\n\t\t// See: https://github.com/mrdoob/three.js/issues/18342#issuecomment-578981172\n\t\tconst scene = new Group();\n\t\tif ( sceneDef.name ) scene.name = parser.createUniqueName( sceneDef.name );\n\n\t\tassignExtrasToUserData( scene, sceneDef );\n\n\t\tif ( sceneDef.extensions ) addUnknownExtensionsToUserData( extensions, scene, sceneDef );\n\n\t\tconst nodeIds = sceneDef.nodes || [];\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0, il = nodeIds.length; i < il; i ++ ) {\n\n\t\t\tpending.push( buildNodeHierachy( nodeIds[ i ], scene, json, parser ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending ).then( function () {\n\n\t\t\treturn scene;\n\n\t\t} );\n\n\t}\n\n}\n\nfunction buildNodeHierachy( nodeId, parentObject, json, parser ) {\n\n\tconst nodeDef = json.nodes[ nodeId ];\n\n\treturn parser.getDependency( 'node', nodeId ).then( function ( node ) {\n\n\t\tif ( nodeDef.skin === undefined ) return node;\n\n\t\t// build skeleton here as well\n\n\t\tlet skinEntry;\n\n\t\treturn parser.getDependency( 'skin', nodeDef.skin ).then( function ( skin ) {\n\n\t\t\tskinEntry = skin;\n\n\t\t\tconst pendingJoints = [];\n\n\t\t\tfor ( let i = 0, il = skinEntry.joints.length; i < il; i ++ ) {\n\n\t\t\t\tpendingJoints.push( parser.getDependency( 'node', skinEntry.joints[ i ] ) );\n\n\t\t\t}\n\n\t\t\treturn Promise.all( pendingJoints );\n\n\t\t} ).then( function ( jointNodes ) {\n\n\t\t\tnode.traverse( function ( mesh ) {\n\n\t\t\t\tif ( ! mesh.isMesh ) return;\n\n\t\t\t\tconst bones = [];\n\t\t\t\tconst boneInverses = [];\n\n\t\t\t\tfor ( let j = 0, jl = jointNodes.length; j < jl; j ++ ) {\n\n\t\t\t\t\tconst jointNode = jointNodes[ j ];\n\n\t\t\t\t\tif ( jointNode ) {\n\n\t\t\t\t\t\tbones.push( jointNode );\n\n\t\t\t\t\t\tconst mat = new Matrix4();\n\n\t\t\t\t\t\tif ( skinEntry.inverseBindMatrices !== undefined ) {\n\n\t\t\t\t\t\t\tmat.fromArray( skinEntry.inverseBindMatrices.array, j * 16 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tboneInverses.push( mat );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Joint \"%s\" could not be found.', skinEntry.joints[ j ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tmesh.bind( new Skeleton( bones, boneInverses ), mesh.matrixWorld );\n\n\t\t\t} );\n\n\t\t\treturn node;\n\n\t\t} );\n\n\t} ).then( function ( node ) {\n\n\t\t// build node hierachy\n\n\t\tparentObject.add( node );\n\n\t\tconst pending = [];\n\n\t\tif ( nodeDef.children ) {\n\n\t\t\tconst children = nodeDef.children;\n\n\t\t\tfor ( let i = 0, il = children.length; i < il; i ++ ) {\n\n\t\t\t\tconst child = children[ i ];\n\t\t\t\tpending.push( buildNodeHierachy( child, node, json, parser ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t} );\n\n}\n\n/**\n * @param {BufferGeometry} geometry\n * @param {GLTF.Primitive} primitiveDef\n * @param {GLTFParser} parser\n */\nfunction computeBounds( geometry, primitiveDef, parser ) {\n\n\tconst attributes = primitiveDef.attributes;\n\n\tconst box = new Box3();\n\n\tif ( attributes.POSITION !== undefined ) {\n\n\t\tconst accessor = parser.json.accessors[ attributes.POSITION ];\n\n\t\tconst min = accessor.min;\n\t\tconst max = accessor.max;\n\n\t\t// glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n\t\tif ( min !== undefined && max !== undefined ) {\n\n\t\t\tbox.set(\n\t\t\t\tnew Vector3( min[ 0 ], min[ 1 ], min[ 2 ] ),\n\t\t\t\tnew Vector3( max[ 0 ], max[ 1 ], max[ 2 ] )\n\t\t\t);\n\n\t\t\tif ( accessor.normalized ) {\n\n\t\t\t\tconst boxScale = getNormalizedComponentScale( WEBGL_COMPONENT_TYPES[ accessor.componentType ] );\n\t\t\t\tbox.min.multiplyScalar( boxScale );\n\t\t\t\tbox.max.multiplyScalar( boxScale );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing min/max properties for accessor POSITION.' );\n\n\t\t\treturn;\n\n\t\t}\n\n\t} else {\n\n\t\treturn;\n\n\t}\n\n\tconst targets = primitiveDef.targets;\n\n\tif ( targets !== undefined ) {\n\n\t\tconst maxDisplacement = new Vector3();\n\t\tconst vector = new Vector3();\n\n\t\tfor ( let i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\t\tconst target = targets[ i ];\n\n\t\t\tif ( target.POSITION !== undefined ) {\n\n\t\t\t\tconst accessor = parser.json.accessors[ target.POSITION ];\n\t\t\t\tconst min = accessor.min;\n\t\t\t\tconst max = accessor.max;\n\n\t\t\t\t// glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n\t\t\t\tif ( min !== undefined && max !== undefined ) {\n\n\t\t\t\t\t// we need to get max of absolute components because target weight is [-1,1]\n\t\t\t\t\tvector.setX( Math.max( Math.abs( min[ 0 ] ), Math.abs( max[ 0 ] ) ) );\n\t\t\t\t\tvector.setY( Math.max( Math.abs( min[ 1 ] ), Math.abs( max[ 1 ] ) ) );\n\t\t\t\t\tvector.setZ( Math.max( Math.abs( min[ 2 ] ), Math.abs( max[ 2 ] ) ) );\n\n\n\t\t\t\t\tif ( accessor.normalized ) {\n\n\t\t\t\t\t\tconst boxScale = getNormalizedComponentScale( WEBGL_COMPONENT_TYPES[ accessor.componentType ] );\n\t\t\t\t\t\tvector.multiplyScalar( boxScale );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Note: this assumes that the sum of all weights is at most 1. This isn't quite correct - it's more conservative\n\t\t\t\t\t// to assume that each target can have a max weight of 1. However, for some use cases - notably, when morph targets\n\t\t\t\t\t// are used to implement key-frame animations and as such only two are active at a time - this results in very large\n\t\t\t\t\t// boxes. So for now we make a box that's sometimes a touch too small but is hopefully mostly of reasonable size.\n\t\t\t\t\tmaxDisplacement.max( vector );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing min/max properties for accessor POSITION.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// As per comment above this box isn't conservative, but has a reasonable size for a very large number of morph targets.\n\t\tbox.expandByVector( maxDisplacement );\n\n\t}\n\n\tgeometry.boundingBox = box;\n\n\tconst sphere = new Sphere();\n\n\tbox.getCenter( sphere.center );\n\tsphere.radius = box.min.distanceTo( box.max ) / 2;\n\n\tgeometry.boundingSphere = sphere;\n\n}\n\n/**\n * @param {BufferGeometry} geometry\n * @param {GLTF.Primitive} primitiveDef\n * @param {GLTFParser} parser\n * @return {Promise<BufferGeometry>}\n */\nfunction addPrimitiveAttributes( geometry, primitiveDef, parser ) {\n\n\tconst attributes = primitiveDef.attributes;\n\n\tconst pending = [];\n\n\tfunction assignAttributeAccessor( accessorIndex, attributeName ) {\n\n\t\treturn parser.getDependency( 'accessor', accessorIndex )\n\t\t\t.then( function ( accessor ) {\n\n\t\t\t\tgeometry.setAttribute( attributeName, accessor );\n\n\t\t\t} );\n\n\t}\n\n\tfor ( const gltfAttributeName in attributes ) {\n\n\t\tconst threeAttributeName = ATTRIBUTES[ gltfAttributeName ] || gltfAttributeName.toLowerCase();\n\n\t\t// Skip attributes already provided by e.g. Draco extension.\n\t\tif ( threeAttributeName in geometry.attributes ) continue;\n\n\t\tpending.push( assignAttributeAccessor( attributes[ gltfAttributeName ], threeAttributeName ) );\n\n\t}\n\n\tif ( primitiveDef.indices !== undefined && ! geometry.index ) {\n\n\t\tconst accessor = parser.getDependency( 'accessor', primitiveDef.indices ).then( function ( accessor ) {\n\n\t\t\tgeometry.setIndex( accessor );\n\n\t\t} );\n\n\t\tpending.push( accessor );\n\n\t}\n\n\tassignExtrasToUserData( geometry, primitiveDef );\n\n\tcomputeBounds( geometry, primitiveDef, parser );\n\n\treturn Promise.all( pending ).then( function () {\n\n\t\treturn primitiveDef.targets !== undefined\n\t\t\t? addMorphTargets( geometry, primitiveDef.targets, parser )\n\t\t\t: geometry;\n\n\t} );\n\n}\n\n/**\n * @param {BufferGeometry} geometry\n * @param {Number} drawMode\n * @return {BufferGeometry}\n */\nfunction toTrianglesDrawMode( geometry, drawMode ) {\n\n\tlet index = geometry.getIndex();\n\n\t// generate index if not present\n\n\tif ( index === null ) {\n\n\t\tconst indices = [];\n\n\t\tconst position = geometry.getAttribute( 'position' );\n\n\t\tif ( position !== undefined ) {\n\n\t\t\tfor ( let i = 0; i < position.count; i ++ ) {\n\n\t\t\t\tindices.push( i );\n\n\t\t\t}\n\n\t\t\tgeometry.setIndex( indices );\n\t\t\tindex = geometry.getIndex();\n\n\t\t} else {\n\n\t\t\tconsole.error( 'THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible.' );\n\t\t\treturn geometry;\n\n\t\t}\n\n\t}\n\n\t//\n\n\tconst numberOfTriangles = index.count - 2;\n\tconst newIndices = [];\n\n\tif ( drawMode === TriangleFanDrawMode ) {\n\n\t\t// gl.TRIANGLE_FAN\n\n\t\tfor ( let i = 1; i <= numberOfTriangles; i ++ ) {\n\n\t\t\tnewIndices.push( index.getX( 0 ) );\n\t\t\tnewIndices.push( index.getX( i ) );\n\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\n\t\t}\n\n\t} else {\n\n\t\t// gl.TRIANGLE_STRIP\n\n\t\tfor ( let i = 0; i < numberOfTriangles; i ++ ) {\n\n\t\t\tif ( i % 2 === 0 ) {\n\n\t\t\t\tnewIndices.push( index.getX( i ) );\n\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\t\t\t\tnewIndices.push( index.getX( i + 2 ) );\n\n\n\t\t\t} else {\n\n\t\t\t\tnewIndices.push( index.getX( i + 2 ) );\n\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\t\t\t\tnewIndices.push( index.getX( i ) );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tif ( ( newIndices.length / 3 ) !== numberOfTriangles ) {\n\n\t\tconsole.error( 'THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.' );\n\n\t}\n\n\t// build final geometry\n\n\tconst newGeometry = geometry.clone();\n\tnewGeometry.setIndex( newIndices );\n\n\treturn newGeometry;\n\n}\n\nexport { GLTFLoader };\n","//import {GLTFLoader} from \"./three.js-r132/examples/jsm/loaders/GLTFLoader.js\";\nimport {GLTFLoader} from \"./GLTFLoader.js\"\n//import * as THREE from \"./three.js-r132/build/three.module.js\";\n//const {GLTFLoader} = require('three/examples/jsm/loaders/GLTFLoader.js');\n//const {THREE} = require(\"three/build/three.module.js\");\n//import {GLTFLoader} from \"https://cdn.jsdelivr.net/gh/hiukim/mind-ar-js@1.1.5/dist/mindar-image-three.prod.js\"\n//import * as THREE from \"https://cdn.jsdelivr.net/gh/hiukim/mind-ar-js@1.1.5/dist/mindar-image-three.prod.js\"\n\n//const THREE = window.MINDAR.IMAGE? window.MINDAR.IMAGE.THREE: window.MINDAR.FACE.THREE;\n\nexport const loadGLTF = (path) => {\n  return new Promise((resolve, reject) => {\n    const loader = new GLTFLoader();\n    loader.load(path, (gltf) => {\n      resolve(gltf);\n    });\n  });\n}\n\nexport const loadAudio = (path) => {\n  return new Promise((resolve, reject) => {\n    const loader = new THREE.AudioLoader();\n    loader.load(path, (buffer) => {\n      resolve(buffer);\n    });\n  });\n}\n\nexport const loadVideo = (path) => {\n  return new Promise((resolve, reject) => {\n    const video = document.createElement(\"video\");\n    //video.addEventListener('loadeddata', () => {\n    video.addEventListener('loadedmetadata', () => {\n      video.setAttribute('playsinline', '');\n      resolve(video);\n    });\n    video.src = path;\n  });\n}\n\nexport const loadTexture = (path) => {\n  return new Promise((resolve, reject) => {\n    const loader = new THREE.TextureLoader();\n    loader.load(path, (texture) => {\n      resolve(texture);\n    }); \n  });\n}\n\nexport const loadTextures = (paths) => {\n  const loader = new THREE.TextureLoader();\n  const promises = [];\n  for (let i = 0; i < paths.length; i++) {\n    promises.push(new Promise((resolve, reject) => {\n      loader.load(paths[i], (texture) => {\n\tresolve(texture);\n      }); \n    }));\n  }\n  return Promise.all(promises);\n}\n","/*\nimport {\n\tMatrix4,\n\tObject3D,\n\tQuaternion,\n\tVector3\n} from \"./three.js-r132/build/three.module.js\";\n*/\nconst Matrix4 = window.THREE.Matrix4\nconst Object3D = window.THREE.Object3D\nconst Quaternion = window.THREE.Quaternion\nconst Vector3 = window.THREE.Vector3\n\n/**\n * Based on http://www.emagix.net/academic/mscs-project/item/camera-sync-with-css3-and-webgl-threejs\n */\n\nconst _position = new Vector3();\nconst _quaternion = new Quaternion();\nconst _scale = new Vector3();\n\nclass CSS3DObject extends Object3D {\n\n\tconstructor( element ) {\n\n\t\tsuper();\n\n\t\tthis.element = element || document.createElement( 'div' );\n\t\tthis.element.style.position = 'absolute';\n\t\tthis.element.style.pointerEvents = 'auto';\n\t\tthis.element.style.userSelect = 'none';\n\n\t\tthis.element.setAttribute( 'draggable', false );\n\n\t\tthis.addEventListener( 'removed', function () {\n\n\t\t\tthis.traverse( function ( object ) {\n\n\t\t\t\tif ( object.element instanceof Element && object.element.parentNode !== null ) {\n\n\t\t\t\t\tobject.element.parentNode.removeChild( object.element );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t} );\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.element = source.element.cloneNode( true );\n\n\t\treturn this;\n\n\t}\n\n}\n\nCSS3DObject.prototype.isCSS3DObject = true;\n\nclass CSS3DSprite extends CSS3DObject {\n\n\tconstructor( element ) {\n\n\t\tsuper( element );\n\n\t\tthis.rotation2D = 0;\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.rotation2D = source.rotation2D;\n\n\t\treturn this;\n\n\t}\n\n}\n\nCSS3DSprite.prototype.isCSS3DSprite = true;\n\n//\n\nconst _matrix = new Matrix4();\nconst _matrix2 = new Matrix4();\n\nclass CSS3DRenderer {\n\n\tconstructor() {\n\n\t\tconst _this = this;\n\n\t\tlet _width, _height;\n\t\tlet _widthHalf, _heightHalf;\n\n\t\tconst cache = {\n\t\t\tcamera: { fov: 0, style: '' },\n\t\t\tobjects: new WeakMap()\n\t\t};\n\n\t\tconst domElement = document.createElement( 'div' );\n\t\tdomElement.style.overflow = 'hidden';\n\n\t\tthis.domElement = domElement;\n\n\t\tconst cameraElement = document.createElement( 'div' );\n\n\t\tcameraElement.style.transformStyle = 'preserve-3d';\n\t\tcameraElement.style.pointerEvents = 'none';\n\n\t\tdomElement.appendChild( cameraElement );\n\n\t\tthis.getSize = function () {\n\n\t\t\treturn {\n\t\t\t\twidth: _width,\n\t\t\t\theight: _height\n\t\t\t};\n\n\t\t};\n\n\t\tthis.render = function ( scene, camera ) {\n\n\t\t\tconst fov = camera.projectionMatrix.elements[ 5 ] * _heightHalf;\n\n\t\t\tif ( cache.camera.fov !== fov ) {\n\n\t\t\t\tdomElement.style.perspective = camera.isPerspectiveCamera ? fov + 'px' : '';\n\t\t\t\tcache.camera.fov = fov;\n\n\t\t\t}\n\n\t\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\n\t\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\n\n\t\t\tlet tx, ty;\n\n\t\t\tif ( camera.isOrthographicCamera ) {\n\n\t\t\t\ttx = - ( camera.right + camera.left ) / 2;\n\t\t\t\tty = ( camera.top + camera.bottom ) / 2;\n\n\t\t\t}\n\n\t\t\tconst cameraCSSMatrix = camera.isOrthographicCamera ?\n\t\t\t\t'scale(' + fov + ')' + 'translate(' + epsilon( tx ) + 'px,' + epsilon( ty ) + 'px)' + getCameraCSSMatrix( camera.matrixWorldInverse ) :\n\t\t\t\t'translateZ(' + fov + 'px)' + getCameraCSSMatrix( camera.matrixWorldInverse );\n\n\t\t\tconst style = cameraCSSMatrix +\n\t\t\t\t'translate(' + _widthHalf + 'px,' + _heightHalf + 'px)';\n\n\t\t\tif ( cache.camera.style !== style ) {\n\n\t\t\t\tcameraElement.style.transform = style;\n\n\t\t\t\tcache.camera.style = style;\n\n\t\t\t}\n\n\t\t\trenderObject( scene, scene, camera, cameraCSSMatrix );\n\n\t\t};\n\n\t\tthis.setSize = function ( width, height ) {\n\n\t\t\t_width = width;\n\t\t\t_height = height;\n\t\t\t_widthHalf = _width / 2;\n\t\t\t_heightHalf = _height / 2;\n\n\t\t\tdomElement.style.width = width + 'px';\n\t\t\tdomElement.style.height = height + 'px';\n\n\t\t\tcameraElement.style.width = width + 'px';\n\t\t\tcameraElement.style.height = height + 'px';\n\n\t\t};\n\n\t\tfunction epsilon( value ) {\n\n\t\t\treturn Math.abs( value ) < 1e-10 ? 0 : value;\n\n\t\t}\n\n\t\tfunction getCameraCSSMatrix( matrix ) {\n\n\t\t\tconst elements = matrix.elements;\n\n\t\t\treturn 'matrix3d(' +\n\t\t\t\tepsilon( elements[ 0 ] ) + ',' +\n\t\t\t\tepsilon( - elements[ 1 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 2 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 3 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 4 ] ) + ',' +\n\t\t\t\tepsilon( - elements[ 5 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 6 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 7 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 8 ] ) + ',' +\n\t\t\t\tepsilon( - elements[ 9 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 10 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 11 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 12 ] ) + ',' +\n\t\t\t\tepsilon( - elements[ 13 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 14 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 15 ] ) +\n\t\t\t')';\n\n\t\t}\n\n\t\tfunction getObjectCSSMatrix( matrix ) {\n\n\t\t\tconst elements = matrix.elements;\n\t\t\tconst matrix3d = 'matrix3d(' +\n\t\t\t\tepsilon( elements[ 0 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 1 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 2 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 3 ] ) + ',' +\n\t\t\t\tepsilon( - elements[ 4 ] ) + ',' +\n\t\t\t\tepsilon( - elements[ 5 ] ) + ',' +\n\t\t\t\tepsilon( - elements[ 6 ] ) + ',' +\n\t\t\t\tepsilon( - elements[ 7 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 8 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 9 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 10 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 11 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 12 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 13 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 14 ] ) + ',' +\n\t\t\t\tepsilon( elements[ 15 ] ) +\n\t\t\t')';\n\n\t\t\treturn 'translate(-50%,-50%)' + matrix3d;\n\n\t\t}\n\n\t\tfunction renderObject( object, scene, camera, cameraCSSMatrix ) {\n\n\t\t\tif ( object.isCSS3DObject ) {\n\n\t\t\t\tobject.onBeforeRender( _this, scene, camera );\n\n\t\t\t\tlet style;\n\n\t\t\t\tif ( object.isCSS3DSprite ) {\n\n\t\t\t\t\t// http://swiftcoder.wordpress.com/2008/11/25/constructing-a-billboard-matrix/\n\n\t\t\t\t\t_matrix.copy( camera.matrixWorldInverse );\n\t\t\t\t\t_matrix.transpose();\n\n\t\t\t\t\tif ( object.rotation2D !== 0 ) _matrix.multiply( _matrix2.makeRotationZ( object.rotation2D ) );\n\n\t\t\t\t\tobject.matrixWorld.decompose( _position, _quaternion, _scale );\n\t\t\t\t\t_matrix.setPosition( _position );\n\t\t\t\t\t_matrix.scale( _scale );\n\n\t\t\t\t\t_matrix.elements[ 3 ] = 0;\n\t\t\t\t\t_matrix.elements[ 7 ] = 0;\n\t\t\t\t\t_matrix.elements[ 11 ] = 0;\n\t\t\t\t\t_matrix.elements[ 15 ] = 1;\n\n\t\t\t\t\tstyle = getObjectCSSMatrix( _matrix );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tstyle = getObjectCSSMatrix( object.matrixWorld );\n\n\t\t\t\t}\n\n\t\t\t\tconst element = object.element;\n\t\t\t\tconst cachedObject = cache.objects.get( object );\n\n\t\t\t\tif ( cachedObject === undefined || cachedObject.style !== style ) {\n\n\t\t\t\t\telement.style.transform = style;\n\n\t\t\t\t\tconst objectData = { style: style };\n\t\t\t\t\tcache.objects.set( object, objectData );\n\n\t\t\t\t}\n\n\t\t\t\telement.style.display = object.visible ? '' : 'none';\n\n\t\t\t\tif ( element.parentNode !== cameraElement ) {\n\n\t\t\t\t\tcameraElement.appendChild( element );\n\n\t\t\t\t}\n\n\t\t\t\tobject.onAfterRender( _this, scene, camera );\n\n\t\t\t}\n\n\t\t\tfor ( let i = 0, l = object.children.length; i < l; i ++ ) {\n\n\t\t\t\trenderObject( object.children[ i ], scene, camera, cameraCSSMatrix );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\nexport { CSS3DObject, CSS3DSprite, CSS3DRenderer };\n","import {loadGLTF} from \"./libs/loader.js\";\n//import {CSS3DRenderer} from \"./libs/three.js-r132/examples/jsm/renderers/CSS3DRenderer.js\";;\nimport {CSS3DRenderer} from \"./libs/CSS3DRenderer.js\";\n//import {mockWithVideo} from './libs/camera-mock.js';\n\n//\n\nconst THREE = window.MINDAR.IMAGE.THREE;\n\nwindow.CSS3DRenderer = CSS3DRenderer;\n\nvar raccoon = null;\nconst loadModel = async() => {\n    raccoon = await loadGLTF('./assets/models/musicband-raccoon/scene.gltf');\n}\n\nloadModel();\n\nfunction startMindAR() {\n  const mindarThree = new window.MINDAR.IMAGE.MindARThree({\n    container: document.body,\n    imageTargetSrc: './assets/targets/logo2.mind',\n    filterMinCF: 1,\n    filterBeta: 10000,\n    missTolerance: 0,\n    warmupTolerance: 0,\n  });\n  const {renderer, scene, camera} = mindarThree;\n\n  const anchor = mindarThree.addAnchor(0);\n  const geometry = new THREE.PlaneGeometry(1, 0.55);\n  const material = new THREE.MeshBasicMaterial( {color: 0x00ffff, transparent: true, opacity: 0.5} );\n  const plane = new THREE.Mesh( geometry, material );\n  anchor.group.add(plane);\n\n  const light = new THREE.HemisphereLight( 0xffffff, 0xbbbbff, 1 );\n  scene.add(light);\n\n  if (raccoon) {\n    raccoon.scene.scale.set(0.1, 0.1, 0.1);\n    raccoon.scene.position.set(0, -0.4, 0);\n    anchor.group.add(raccoon.scene);\n  }\n\n  const start = async() => {\n    // Sample\n    await mindarThree.start();\n    renderer.setAnimationLoop(() => {\n      try {\n        renderer.render(scene, camera);\n      } catch(e) {\n        console.log(\"render crash\");\n      }  \n    });\n  }\n  start();\n}\n\nfunction startTimer() {\n  setTimeout(function () {\n      if (raccoon) {\n          startMindAR()\n      } else {\n          setTimeout(startTimer, 100)\n      }\n  }, 100)\n}\ndocument.addEventListener('DOMContentLoaded', () => {\n    startTimer();\n});\n"]}